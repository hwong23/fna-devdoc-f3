<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Harry Wong, ing." />
  <meta name="author" content="Eddie Hernandez, ing." />
  <meta name="author" content="Federico Suárez, ing." />
  <meta name="author" content="Darío Correal, ing." />
  <meta name="dcterms.date" content="2023-08-31" />
  <meta name="keywords" content="SOA, madurez, gobierno" />
  <title>Diagnóstico SOA Actual FNA</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/main/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta property="og:type" content="article" />
  <meta name="dc.title" content="Diagnóstico SOA Actual FNA" />
  <meta name="citation_title" content="Diagnóstico SOA Actual FNA" />
  <meta property="og:title" content="Diagnóstico SOA Actual FNA" />
  <meta property="twitter:title" content="Diagnóstico SOA Actual FNA" />
  <meta name="dc.date" content="2023-08-31" />
  <meta name="citation_publication_date" content="2023-08-31" />
  <meta property="article:published_time" content="2023-08-31" />
  <meta name="dc.modified" content="2023-08-31T14:58:18+00:00" />
  <meta property="article:modified_time" content="2023-08-31T14:58:18+00:00" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Harry Wong, ing." />
  <meta name="citation_author_institution" content="Arquitecto SOA, Stefanini" />
  <meta name="citation_author" content="Eddie Hernandez, ing." />
  <meta name="citation_author_institution" content="Datos, Stefanini" />
  <meta name="citation_author" content="Federico Suárez, ing." />
  <meta name="citation_author_institution" content="Infraestructura, Stefanini" />
  <meta name="citation_author" content="Darío Correal, ing." />
  <meta name="citation_author_institution" content="Arquitecto TI, Stefanini" />
  <link rel="canonical" href="https://hwong23.github.io/fna-devdoc-f3/" />
  <meta property="og:url" content="https://hwong23.github.io/fna-devdoc-f3/" />
  <meta property="twitter:url" content="https://hwong23.github.io/fna-devdoc-f3/" />
  <meta name="citation_fulltext_html_url" content="https://hwong23.github.io/fna-devdoc-f3/" />
  <meta name="citation_pdf_url" content="https://hwong23.github.io/fna-devdoc-f3/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://hwong23.github.io/fna-devdoc-f3/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://hwong23.github.io/fna-devdoc-f3/v/2bca8e189efe906fe56d399405acf71d2b4be3a8/" />
  <meta name="manubot_html_url_versioned" content="https://hwong23.github.io/fna-devdoc-f3/v/2bca8e189efe906fe56d399405acf71d2b4be3a8/" />
  <meta name="manubot_pdf_url_versioned" content="https://hwong23.github.io/fna-devdoc-f3/v/2bca8e189efe906fe56d399405acf71d2b4be3a8/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Diagnóstico SOA Actual FNA</h1>
</header>
<p>Documentación del proyecto 181-2020, E-Service,
(<a href="https://hwong23.github.io/fna-devdoc-f3/v/2bca8e189efe906fe56d399405acf71d2b4be3a8/">permalink</a>)
versión indicada a continuación, se encuentra en
****
<a href="https://github.com/hwong23/fna-devdoc-f3/tree/2bca8e189efe906fe56d399405acf71d2b4be3a8">2bca8e1</a>
de August 31, 2023.</p>
<h2 id="grupo-e-service">Grupo E-Service</h2>
<ul>
<li><p><strong>Harry Wong, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="GitHub icon" />
<a href="https://github.com/e_hwong">e_hwong</a>
<br>
<small>
Arquitecto SOA, Stefanini
</small></p></li>
<li><p><strong>Eddie Hernandez, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="GitHub icon" />
<a href="https://github.com/e_ehernandez">e_ehernandez</a>
<br>
<small>
Datos, Stefanini
</small></p></li>
<li><p><strong>Federico Suárez, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="GitHub icon" />
<a href="https://github.com/e_fsuarez">e_fsuarez</a>
<br>
<small>
Infraestructura, Stefanini
</small></p></li>
<li><p><strong>Darío Correal, ing.</strong>
<br>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="GitHub icon" />
<a href="https://github.com/e_dcorreal">e_dcorreal</a>
<br>
<small>
Arquitecto TI, Stefanini
</small></p></li>
</ul>
<hr />
<h1 id="fase-3-soa-objetivo">Fase 3: SOA Objetivo</h1>
<h1 id="contenido-de-los-productos-contractuales-181-2020">Contenido de los Productos Contractuales, 181-2020</h1>
<h1 id="producto-9-pr9.-portafolio-de-inciativas-y-brechas-soa-objetivo">Producto 9: PR9. Portafolio de Inciativas y Brechas SOA Objetivo</h1>
<p>La técnica del portafolio de brechas es utilizada en el desarrollo de este ejercicio de diagnóstico SOA del FNA para delinear los proyectos generadores de cambios aplicables a la situación actual SOA (Fase 1 del proyecto). El portafolio parte desde la arquittectura candidata desarrollada en la fase anterior e identifica los paquetes de trabajo (iniciativas, proyectos, reformas) que conducen al FNA a la arquitectura SOA candidata. La idea principal del análisis de brecha es resaltar los proyectos o ítems omitidos, o por definir, entre la situación actual SOA del FNA (fase 1 del diagnóstico) y la situación objetivo (fase 2). Incluso cuando esta última está todavía en evolución es posible avistar dichos cambios y proyectos. Lo anterior da origen al portafolio de iniciativas priorizadas, las mismas que al ser programas en el tiempo se convierte en la <em>hoja de ruta SOA del FNA</em> (producto 10 de esta fase), y cuya ejecución cerrará las brechas entre el estado inicial SOA y el objetivo.</p>
<p><strong>Nota</strong>: los análisis de este producto están dirigidos a cumplir los objetivos del proyecto SOA: dependencia de proveedor (OBJ1), fortaleza SOA de las aplicaciones (OBJ2), y tiempo de mercado (OBJ3).</p>
<p><br></p>
<h2 id="justificación">Justificación</h2>
<p>Asegurar que la arquitectura SOA del Fondo apegada a la <a href="vistadesegmento.md">Vista de Segmento FNA</a> soporte al procesamiento de información, a los sistemas de información, a las capacidades de negocio, y tecnologías requeridas para cumplir los objetivos de este ejercicio de diagnóstico SOA y que están diagramados en la arquitectura SOA candidata del FNA. Provee los paquetes de trabajo que garanticen (continuidad, orden e impacto) la realización de los cambios entre evoluciones de la arquitectura SOA del Fondo. Por último, el portafolio proporciona datos de entrada para los procesos de contratación y adjudicación futuros que el FNA considere para la implementación de los cambios.</p>
<h2 id="contenidos">Contenidos</h2>
<ol type="1">
<li>Matriz de brechas de arquitectura SOA candidata del segmento FNA</li>
<li>Lista de iniciativas y proyectos (paquetes de trabajo) del segmento FNA: ítems por retener, rediseñar, actualizar, retirar</li>
<li>Análisis de impacto y dependencia entre los cambios en el segmento FNA</li>
<li>Ficha descriptiva de proyectos para el segmento FNA (justificación)</li>
</ol>
<p><br></p>
<h2 id="criterios-de-aceptación">Criterios de Aceptación</h2>
<ul>
<li>Lista de cambios para el segmento FNA: ítems incluídos, por mejorar, nuevos y eliminados</li>
<li>Hoja de ruta preliminar hacia un objetivo de mejora</li>
</ul>
<hr />
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Método de análisis de brecha FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="método-de-análisis-de-brecha-fna">Método de Análisis de Brecha FNA</h2>
<p>El método de análisis de brecha para el FNA está adaptado en cuanto a hacer foco en los resultados esperados de las brechas y en usar los resultados de las fases anteriores del presente ejercicio SOA (ver <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">04b.Resumen Fase 1</a>). Este análisis de brecha busca dos onjetivos concretos.</p>
<p><br></p>
<h3 id="objetivos-del-análisis-de-brecha-fna">Objetivos del Análisis de Brecha FNA</h3>
<p>Este análisis busca dos objtivos concretos: encontrar brechas que reutilicen los activos de software y de TI del FNA. El segundo objetivo es encontrar los brechas que mejor conecten con las oportunidades y problemáticas encontradas en primeras dos fases de este diagnóstico SOA.</p>
<ol type="1">
<li><p>Reutilizar los activos de software y TI del FNA. Todos los activos de software y TI disponibles en el FNA deben ser equiparados, funcional y tecnológicamente, con los ajustes requeridos por la acrquitectura candidata versión 2.0 entregada por la fase 2 de este diagnóstico. Este objeitvo entrará a delinear las estrategias de implementación de las brechas (soluciones futuras) que se encuentren.</p></li>
<li><p>Brechas que conecten con las problemáticas y conocimiento previo. Este método parte de la selección de los ítems y conocimiento considerados relevantes, como problemáticas, riesgos y oportunidades, que fueron desarrolladas en las fases anteriores de este proyecto de diagnóstico SOA del FNA. Cada uno de estos contribuye a la identificación de brechas importantes para el Fondo. Por ejemplo, si partimos de uno de los objetivos de esta consultoría, el de flexibilidad, vamos a encontrar brechas que aporten a cumplirlo.</p></li>
</ol>
<p><br></p>
<h3 id="entradas-y-salidas-del-método-análisis-de-brecha-fna">Entradas y Salidas del Método Análisis de Brecha FNA</h3>
<p>En la siguiente imagen presentamos las entradas necesarias para garantizar tanto las salidas como los objetivos que este método se propone (descritos arriba).</p>
<figure>
<img src="images/brecha1.png" />
</figure>
<p><a href="">Imagen 1.</a> Entradas y salidas del método de análisis de brechas FNA. Relación de las fases anteriores con las expectativas y productos contractuales de esta última fase.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<p>Las entradas más importantes para la realización de este método son las arquitecturas de referencias actual y objetivo. Esto es, la arquitectura versión 1.0, analizada en la fase 1 de este diagnóstico, y la versión 2.0, elaborada por en la fase 2 de este proyecto de diagnóstico.</p>
<p>De las salidas de este método, la que más conecta con las expectativas es la matriz de brechas SOA por contexto, la cual es de importancia porque alimenta al portafolio de iniciativas y brechas (producto 9, PR9), que es finalmente el principal producto de esta última fase del presente proyecto. De la matriz de brechas se obtiene la lista de proyectos de cierre de brecha, la cual se complementa al agregarle a cada proyectos las estrategias de implementación. Estas dos salidas, la matriz de brechas y la lista de proyectos, las consideramos entre las más importantes que se desarrollanrán con la aplicación de este métrodo.</p>
<p><br></p>
<h3 id="pasos-del-método-de-anålisis-de-brechas-fna">Pasos del Método de Anålisis de Brechas FNA</h3>
<p>Este método inicia por la matrix de brechas, sea por dominio o perspectiva de arquitectura. La matriz presenta una comparación y las diferencias entre las arquitecturas SOA del FNA, versión 1 y 2 respectivamente desde un dominio o perspectiva particular, por ejemplo, negocio, aplicaciones, datos, Crédito, Cartera, flexibilidad, etc. Los ítems de esa perspectiva son contrastados entre ambas versiones para obtener elementos de cierre a los que llamaremos brechas.</p>
<p>El siguiente paso es hacer una lista de las iniciativas y proyectos de cierre de brechas y documentarlas en el repositorio SOA del FNA. Esta lista de cambios a la arquitectura es por un lado, una arquitectura de transición en sí misma, y es también una herramienta para agrupar y priorizar los impactos de cambios en el Fondo.</p>
<p>Este último es precisamente el tercer paso: agrupar y priorizar las brechas en tareas y proyectos.</p>
<p><br></p>
<p>En resumen, los pasos para la aplicación de este metodo son
1. Matriz de brechas por contexto. Escoja el contexto. Arquitectura actual en las filas, arquitectura objetivo en columnas.
1. (por cada brecha de la matriz) Listar los elementos del cambio.
1. (a cada proyecto de cierre de brecha) Agregar estrategia de implementación.
1. Agrupar y priorizar la lista de cambios (brechas, paso 2) en proyectos ejecutables.</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Matriz de brechas de arquitectura SOA candidata del segmento FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="análisis-de-brechas-del-fna.-iniciativas">Análisis de Brechas del FNA. Iniciativas</h2>
<h3 id="iniciativa-a.-gobierno">Iniciativa A. Gobierno</h3>
<ul>
<li>A1 Gobierno SOA</li>
<li>A2 Oficina de arquitectura</li>
</ul>
<h3 id="b-iniciativa-b.-servicios-y-negocio">B Iniciativa B. Servicios y Negocio</h3>
<ul>
<li>B1 Gestión arquitectura 2.0</li>
<li>B2 Microservicios</li>
<li>B3 Portafolio de API</li>
<li>B3.1 API Crédito constructor</li>
</ul>
<h3 id="iniciativa-c.-plataforma-tecnológica">Iniciativa C. Plataforma tecnológica</h3>
<ul>
<li>C1 Service Mesh</li>
<li>C2 Plataforma Híbrida de Integración</li>
<li>C3 Hub de Integración Digital</li>
</ul>
<h3 id="iniciativa-e.-infraestructura">Iniciativa E. Infraestructura</h3>
<ul>
<li>E1 Infraestructura</li>
</ul>
<p><br></p>
<h2 id="matriz-de-brechas-de-arquitectura-soa-candidata-del-segmento-fna">Matriz de brechas de arquitectura SOA candidata del segmento FNA</h2>
<p>Los análisis siguientes corresponden a la descripción de los elementos de cierre de brechas del FNA <em>respecto al contexto de flexibilidad de negocio</em>. Es decir, los cambios analizados abajo están asociados al contexto de flexibilidad de negocio, y por tanto, aportan a este, y por ende, a la empresa FNA. Dicho de otra manera, las brechas descritos a continuación son necesarios para mejorar la flexibilidad de negocio del segmento de empresa FNA objeto de este diagnóstico.</p>
<p><br></p>
<h2 id="análisis-de-brecha-crédito-constructor.-contexto-flexibilidad-de-negocio">Análisis de Brecha Crédito Constructor. Contexto Flexibilidad de Negocio</h2>
<figure>
<img src="images/brechaCreditoCostructor.jpg" />
</figure>
<p><a href="">Imagen 1.</a> Partes de la arquitectura de Crédito Constructor impactados por el análisis de brecha en el contexto de flexibilidad de negocio.</p>
<p><em>Fuente: ae_fna_as_is.archimate.</em></p>
<p><br></p>
<p>Las partes impactadas por el análisis de brecha de la arquitectura de Crédito Constructor en el contexto de flexibilidad de negocio, y que por razón de este deben ser sustituidas por API indicadas en la arquitectura de SOA 2.0 del FNA son los indicados con actualización en la siguiente tabla.</p>
<table>
<colgroup>
<col style="width: 49%" />
<col style="width: 32%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>nombre</strong></th>
<th><strong>tipo</strong></th>
<th><strong>brecha</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ESB-IBM</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td>Adaptador Integración Cobis</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>FrameWork ESB</td>
<td>application-collaboration</td>
<td></td>
</tr>
<tr class="even">
<td>Adaptador Tecnologia SOAP</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Adaptador Integración Bizagi IBM (java)</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="even">
<td>Adaptador Integración Cuadro de ventas</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Cobis</td>
<td>application-component</td>
<td>actualizacion</td>
</tr>
<tr class="even">
<td>Servicios Cobis</td>
<td>application-service</td>
<td></td>
</tr>
<tr class="odd">
<td>Cuadro Ventas CCP</td>
<td>application-component</td>
<td>actualizacion</td>
</tr>
<tr class="even">
<td>Servicios Cuadro de Ventas CCP</td>
<td>application-service</td>
<td></td>
</tr>
<tr class="odd">
<td>Bizagi IBM (java)</td>
<td>application-component</td>
<td>actualizacion</td>
</tr>
<tr class="even">
<td>Servicios CapaSoa Bizagi</td>
<td>application-service</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="análisis-de-brecha-bus-de-datos-empresarial.-contexto-flexibilidad-de-negocio">Análisis de Brecha Bus de Datos Empresarial. Contexto Flexibilidad de Negocio</h2>
<p>Siguiendo la misma intención de introducir las API (arquitectura candidata SOA, 2.0 del FNA) para aumentar la flexibilidad de negocio, esta vez, en el bus de datos de la empresa, este debe transicionar de adaptadores particulares a API estándares de nivel funcional. Nota: el cambio de adaptadores por API implica, y puede que con mayor profundidad, a los consumidores de estos adaptadores.</p>
<figure>
<img src="images/brechaESBFNA.jpg" />
</figure>
<p><a href="">Imagen 1.</a> Partes de la arquitectura del bus de datos del FNA (ESB IBM) impactados por el análisis de brecha en el contexto de flexibilidad de negocio.</p>
<p><em>Fuente: ae_fna_as_is.archimate.</em></p>
<p><br></p>
<p>Las partes impactadas por el análisis de brecha de la arquitectura del bus de datos del FNA (ESB IBM) en el contexto de flexibilidad de negocio, y que por razón de este deben ser intervenidas por API, las mimsas que son requeridas en la arquitectura SOA 2.0 del Fondo, son los indicados en la siguiente tabla, columna ‘brecha’.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 53%" />
<col style="width: 29%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>nombre</strong></th>
<th><strong>tipo</strong></th>
<th><strong>brecha</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ESB-IBM</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td>MQ ESB IBM Entrada Request</td>
<td>application-interaction</td>
<td></td>
</tr>
<tr class="odd">
<td>Service Gateway</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="even">
<td>Adaptadores IntegraciÛn int</td>
<td>application-interface</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Archivo ConfiguraciÛn Enrutamiento</td>
<td>data-object</td>
<td></td>
</tr>
<tr class="even">
<td>Service Componnet</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="odd">
<td>Homologaciones</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="even">
<td>Tabla HomologaciÛn</td>
<td>data-object</td>
<td></td>
</tr>
<tr class="odd">
<td>Capa Servicios ESB</td>
<td>application-collaboration</td>
<td>actualización</td>
</tr>
<tr class="even">
<td>Adaptadores TecnologÌa int</td>
<td>application-interface</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Utilitarias Framework ESB</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="even">
<td>Manejo Logs</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="odd">
<td>Manejo Errorres</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="even">
<td>Auditor Servicios</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="odd">
<td>MQ ESB IBM Salida Request</td>
<td>application-interaction</td>
<td></td>
</tr>
<tr class="even">
<td>MQ ESB IBM Entrada Response</td>
<td>application-interaction</td>
<td></td>
</tr>
<tr class="odd">
<td>MQ ESB IBM Salida Responce</td>
<td>application-interaction</td>
<td></td>
</tr>
<tr class="even">
<td>Aplicaciones Proveedoras Internas del FNA</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td>Aplicaciones Consumidoras Internas del FNA</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td>ESB-DMZ</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td>Adaptadores IntegraciÛn Ext</td>
<td>application-interface</td>
<td>sustitución</td>
</tr>
<tr class="even">
<td>Adaptadores TecnologÌa Ext</td>
<td>application-interface</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Aplicaciones Consumidoras Externas al FNA</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td>Aplicaciones Proveedoras Externas al FNA (copy)</td>
<td>application-component</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="análisis-de-brecha-bizagi---cobis.-contexto-flexibilidad-de-negocio">Análisis de Brecha Bizagi - Cobis. Contexto Flexibilidad de Negocio</h2>
<p>La sustitución de adaptadores por API puede ser aplicada al caso de los procesos de negocio y la manera como estos se relacionan con los componentes subyacentes del ERP Cobis.</p>
<figure>
<img src="images/brechaBizagi-Cobis.png" />
</figure>
<p><a href="">Imagen 1.</a> Partes de la arquitectura de la plataforma de negocio FNA (BPMS Bizagi) impactados por el análisis de brecha en el contexto de flexibilidad de negocio.</p>
<p><em>Fuente: ae_fna_as_is.archimate.</em></p>
<p><br></p>
<p>Las partes impactadas por el análisis de brecha de la arquitectura del bus de datos del FNA (ESB IBM) en el contexto de flexibilidad de negocio, y que por razón de este deben ser intervenidas por API, las mimsas que son requeridas en la arquitectura SOA 2.0 del Fondo, son los indicados en la siguiente tabla, columna ‘brecha’.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 53%" />
<col style="width: 30%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>nombre</strong></th>
<th><strong>tipo</strong></th>
<th><strong>brecha</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cobis</td>
<td>application-component</td>
<td>actualizacion</td>
</tr>
<tr class="even">
<td>MQ-Queue</td>
<td>application-function</td>
<td></td>
</tr>
<tr class="odd">
<td>Servicios Cobis</td>
<td>application-service</td>
<td>actualización</td>
</tr>
<tr class="even">
<td>Bizagi</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td>Servicios Bizagi</td>
<td>application-service</td>
<td>actualización</td>
</tr>
<tr class="even">
<td>ESB-IBM</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="odd">
<td>Adaptador Tecnologia MQ</td>
<td>application-component</td>
<td></td>
</tr>
<tr class="even">
<td>Adaptador Integración Cobis</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="odd">
<td>Adaptador Integración Bizagi</td>
<td>application-component</td>
<td>actualización</td>
</tr>
<tr class="even">
<td>FrameWork ESB</td>
<td>application-collaboration</td>
<td></td>
</tr>
<tr class="odd">
<td>Adaptador Tecnologia SOAP</td>
<td>application-component</td>
<td>sustitución</td>
</tr>
<tr class="even">
<td>Notificar errores tecnicos y de negocio (Mail)</td>
<td>application-component</td>
<td></td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Lista de iniciativas y proyectos SOA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="oportunidades-ky-proyectos-de-cierre-de-brecha">Oportunidades ky Proyectos de Cierre de Brecha</h2>
<p>Las iniciativas de transición, en este contexto, son paquetes de trabajo agrupados, que son a la vez proyectos ejecutables de cierre de brechas que realizan sustituciones, reajustes, o mejoras en un área de la arquitectura actual.</p>
<p>Las oportunidades dirigen a las iniciativas, las cuales buscan alcanzar dichas oportunidades mediante los proyectos de transformación que describiremos más adelante.</p>
<p><br></p>
<h3 id="oportunidades-fna.-puntos-de-mejora">Oportunidades FNA. Puntos de mejora</h3>
<ul>
<li>OP1. Instaurar la figura de gobierno SOA, capacidad, proceso y recursos. El gobierno SOA para aumentar índices de independencia de proveedor del Fondo y relevancia de arquitectura. Utilizar herramientas, métodos y recursos (personas) para controlar lineamientos.</li>
<li>OP2. Mejorar proceso de diseño / construcción de soluciones SOA. Optimizar el proceso de construcción de soluciones SOA. Unificar el proceso de construcción y ofrecer un vocabulario común con el negocio.</li>
<li>OP3.​ Mejorar la oferta de servicios analíticos en segmento FNA. Habilitar la estrategia de inteligencia de negocios basado en la distribución de los datos. Soportar la estrategia de analítica del FNA (intel. artificial). Habilitar la generación de productos de datos analíticos como servicio.</li>
<li>OP4. Aumentar el nivel de utilización de la Tecnología SOA del FNA. Habilitar las facilidades de directorio y composición de servicios del ESB (IBM). Soportar la ejecución (rediseño) de los procesos de negocio FNA.</li>
<li>OP5. Servicios FNA guiados por arquitectura 2.0. Mejorar el tiempo de puesta en producción. Modernizar las soluciones SOA mediante gestión de tecnologías de arquitectura 2.0.</li>
<li>OP6​. Gestión de la Tecnología (gobierno) orientada por arquitectura 2.0​. Activar las herramientas de monitoreo de los servicios e índices de eficacia SOA.</li>
<li>OP7​. Articulación y fortalecimiento del equipo de arquitectura del FNA junto a proveedores Institucionalizar oficina de arquitectura. Estructurar equipo de arquitecto SOA, aplicaciones, TI y datos</li>
<li>OP8​. Monitoreo de los índices de eficacia de los servicios FNA​. Mejorar indicadores de eficacia y madurez SOA: índices de cobertura, alineación y flexibilidad de negocio.</li>
</ul>
<p><br></p>
<h3 id="prioridades-de-aprovechamiento">Prioridades de Aprovechamiento</h3>
<h4 id="prioridad-alta">Prioridad Alta</h4>
<ul>
<li>OP1. Gobierno SOA​</li>
<li>OP7. Articulación y fortalecimiento del equipo de arquitectura​</li>
</ul>
<h4 id="prioridad-media---alta">Prioridad Media - Alta</h4>
<ul>
<li>OP2. Diseño / construcción de soluciones SOA​</li>
<li>OP5. Servicios FNA guiados por arquitectura versión 2.0​</li>
<li>OP3. Oferta de servicios analíticos a la organización</li>
</ul>
<h4 id="prioridad-media---media">Prioridad Media - Media</h4>
<ul>
<li>OP4. Aumentar la utilización de la Tecnología SOA​</li>
<li>OP6. Gestión de tecnología (gobierno) orientada por arquitectura 2.0​</li>
<li>OP8. Monitoreo de los índices de eficacia gobierno y diseño SOA</li>
</ul>
<h4 id="prioridad-media---baja">Prioridad Media - Baja</h4>
<ul>
<li>N/A</li>
</ul>
<h4 id="prioridad-baja">Prioridad Baja</h4>
<ul>
<li>N/A</li>
</ul>
<p><br></p>
<h3 id="lista-de-proyectos-de-cierre-de-brechas">Lista de Proyectos de Cierre de Brechas</h3>
<p>Los siguientes proyectos, o paquetes de trabajo, son requeridos para cerrar las brechas de flexibilización de la arquitectura actual de Crédito Constructor del FNA. Estos proyectos de cambios provienen del análisis del brecha descrito en <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">09b. Matriz de brechas</a>.</p>
<p><br></p>
<h4 id="crédito-constructor-fna">Crédito Constructor FNA</h4>
<p>Proyectos de cierre de brecha Crédito Constructor FNA.</p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 22%" />
<col style="width: 52%" />
<col style="width: 9%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>id</strong></th>
<th><strong>Proyecto</strong></th>
<th><strong>Objetivo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Impl.</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BR01</td>
<td>API Crédito Constructor</td>
<td>Actualizar las interfaces de ejecución y exposición de funcionalidades</td>
<td>incremental</td>
<td>actualizacion</td>
</tr>
<tr class="even">
<td>BR02</td>
<td>Estandarización de Integración</td>
<td>Disminuir los adaptadores particulares. Reemplazarlos por llamadas a API</td>
<td>regresivo</td>
<td>sustitución</td>
</tr>
</tbody>
</table>
<p><em>Impl.</em>: estrategia de implementación</p>
<p><em>El tipo de proyeto</em> indica el riesgo técnico que causará en la operación de la solución, en este caso, Crédito Constructor. <em>Las estrategias de implementación</em> indican el tipo de trabajo que debe realizarse para minimizar el impacto que el proyecto causará en el este segmento de la empresa del FNA.</p>
<p><br></p>
<h4 id="bus-de-datos-empresarial-fna">Bus de Datos Empresarial FNA</h4>
<p>Los siguientes proyectos (paquetes de trabajo) son requeridos para cerrar brechas en pro de la flexibilización de negocio, y por tanto, de la arquitectura actual del bus de datos ESB IBM del FNA. Estos proyectos de cambios provienen del análisis del brecha descrito en <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">09b. Matriz de brechas</a>.</p>
<p><br></p>
<p>Proyectos de cierre de brecha ESB IBM del FNA.</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 39%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>id</strong></th>
<th><strong>Proyecto</strong></th>
<th><strong>Objetivo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Impl.</strong></th>
<th><strong>Depend</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BR010</td>
<td>Estandarización de Integración ESB FNA</td>
<td>Disminuir los adaptadores particulares. Reemplazarlos por exposición (y gestión) de API</td>
<td>regresivo</td>
<td>sustitución</td>
<td>BR02</td>
</tr>
<tr class="even">
<td>BR011</td>
<td>Servicios de negocio y recomposición</td>
<td>Agregar servicios de negocio a la capa de negocio del ESB. Rediseño de las composiciones de servicios que reflejen el flujo de las transacciones de negocio</td>
<td>incremental</td>
<td>actualizacion</td>
<td>BR02</td>
</tr>
</tbody>
</table>
<p><em>Impl.</em>: estrategia de implementación.
<em>Depend</em>: el proyecto actual puede iniciar (o no) según el desempeño de los proyectos en relación de dependencia con este.</p>
<p><em>El tipo de proyeto</em> indica el riesgo técnico que causará en la operación de la solución. Para el caso particular del ESB FNA, el proyecto BR10, Estandarización de Integración, extiende los cambios hasta los consumidores de los antes adaptadores. <em>Las estrategias de implementación</em> indican el tipo de trabajo que debe realizarse para minimizar el impacto que el proyecto causará en el este segmento de la empresa del FNA.</p>
<p><br></p>
<h4 id="procesos-de-negocio-bizagi---cobis-fna">Procesos de Negocio Bizagi - Cobis FNA</h4>
<p>Proyectos de cierre de brecha de la plataforma de procesos de negocio, Bizagi - Cobis.</p>
<p><br></p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 39%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>id</strong></th>
<th><strong>Proyecto</strong></th>
<th><strong>Objetivo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Impl.</strong></th>
<th><strong>Depend</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BR020</td>
<td>Estandarización de Integración ESB FNA</td>
<td>Disminuir los adaptadores particulares. Reemplazarlos por exposición (y gestión) de API</td>
<td>regresivo</td>
<td>sustitución</td>
<td>BR10</td>
</tr>
<tr class="even">
<td>BR021</td>
<td>Servicios de negocio y recomposición</td>
<td>Agregar servicios de negocio de soporte a los procesos de negocio Bizagi FNA. Rediseño de las composiciones de servicios que reflejen el flujo de las transacciones de negocio</td>
<td>incremental</td>
<td>actualizacion</td>
<td>BR10</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Ficha descriptiva de proyectos para el segmento FNA</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="br01.-api-crédito-constructor">BR01. API Crédito Constructor</h3>
<h4 id="objetivo">Objetivo</h4>
<p>Actualizar las interfaces de ejecución y exposición de funcionalidades (API) de Crédito Constructor.</p>
<p><br></p>
<h4 id="oportunidades-retos">Oportunidades / Retos</h4>
<ul>
<li>Convertir al producto Crédito Constructor en funcionalidades granulares, reutilizables y expuestas (privadas, protegidas y públicas)</li>
<li>Comercializar el API de C. Constructor</li>
<li>Estandarizar el modelo de integración e intercambio de datos</li>
</ul>
<h4 id="alcance">Alcance</h4>
<ul>
<li>Estructurar e implementar funcionalidades del producto en forma de operaciones y datos expuestos (API)</li>
<li>Establecer los nuevos consumidores de las API del producto</li>
<li>Actualizar y modificar a los consumidores actuales (redirección)</li>
</ul>
<h4 id="impacto-beneficio">Impacto / Beneficio</h4>
<ul>
<li>Proteger de impacto por cambios a los consumidores y ambos extremos de la integración</li>
<li>Flexibilidad de modificación de las integraciones</li>
<li>Modernización del modelo y tecnología de integración</li>
</ul>
<h4 id="actores">Actores</h4>
<ul>
<li>Unidades de negocio</li>
<li>Oficina de Arquitectura</li>
<li>Proveedores del FNA (Cobis, IBM, Oracle)</li>
<li>Consultores / fabricantes de apoyo</li>
</ul>
<h4 id="tecnologias">Tecnologias</h4>
<ul>
<li>Portafolio de API</li>
<li>Herramientas de diseño de API</li>
</ul>
<p><br></p>
<h3 id="hub-de-integración-digital">Hub de Integración Digital</h3>
<h4 id="objetivo-1">Objetivo</h4>
<p>Proveer una plataforma de datos de alta velocidad que intermedie entre el API Gateway y la Plataforma híbrida de Integración ​</p>
<h4 id="oportunidades-retos-1">Oportunidades / Retos</h4>
<ul>
<li>Desacoplamiento de sistemas de información​</li>
<li>Consulta de información con baja latencia​</li>
<li>Alimentación a la zona de analítica​</li>
</ul>
<h4 id="actores-1">Actores</h4>
<ul>
<li>Encargados de infraestructura y operaciones​</li>
<li>Oficina de arquitectura​</li>
<li>Consultores de soporte​</li>
</ul>
<h4 id="impacto-beneficio-1">Impacto / Beneficio</h4>
<ul>
<li>Soporte a esquemas híbridos de despliegue (on-premises y cloud)​</li>
<li>Implementación de prácticas DevOps como despliegue continuo e integración continua​</li>
<li>Mayor acceso y velocidad a los datos operativos y analíticos de la organización​</li>
</ul>
<h4 id="alcance-1">Alcance</h4>
<ul>
<li>Arquitectura de integración​</li>
<li>Integración con el API Gateway y la plataforma híbrida de integración​</li>
<li>Integración en un proceso misional​</li>
</ul>
<h4 id="tecnología">Tecnología</h4>
<ul>
<li>Hub de Integración Digital</li>
</ul>
<p><br></p>
<h3 id="data-mesh">Data Mesh</h3>
<h4 id="objetivo-2">Objetivo</h4>
<p>Implementar una estrategia de datos que permita al FNA gestionar sus datos como un activo y aumentar el valor que obtiene de sus datos mediante la identificación de oportunidades para el uso de datos, reducción de costos y mitigación de riesgos​</p>
<h4 id="oportunidades-retos-2">Oportunidades / Retos</h4>
<ul>
<li>Traducir las necesidades del negocio en requerimientos de datos y de sistemas para que los procesos tengan de manera consistente los datos que requieren​</li>
<li>Preparar estratégicamente al FNA es para evolucionar productos, servicios y datos para aprovechar las oportunidades comerciales inherentes a las tecnologías emergentes​</li>
</ul>
<h4 id="actores-2">Actores</h4>
<ul>
<li>Oficina de Arquitectura FNA​</li>
<li>Consultores de apoyo​</li>
<li>Arquitecto de Datos​</li>
</ul>
<h4 id="impacto-beneficio-2">Impacto / Beneficio</h4>
<ul>
<li>Facilitar la alineación entre el negocio y TI​</li>
<li>Diseños de estructuras y planes que cumplan con los requerimientos de datos actuales y a largo plazo para el FNA​</li>
<li>Usar la Arquitectura de Datos para establecer la semántica de una empresa, a través de un vocabulario común del negocio​
​<br />
#### Alcance</li>
<li>Producir las versiones iniciales de los artefactos de Arquitectura de Datos, como el modelo de datos empresarial, el mapa de flujo de datos y mapas de ruta de toda la empresa​</li>
<li>Alinear la Arquitectura de Datos con la estrategia empresarial y la arquitectura de negocio​</li>
<li>Definir un modelo canónico de datos basado en un modelo unificado de datos y que permita incrementalmente la implementación de un Data Mesh​</li>
</ul>
<h4 id="tecnología-1">Tecnología</h4>
<ul>
<li>Herramientas de modelado de datos</li>
<li>Herramientas que provea servicios de implementación de Data Mesh (Ingesta, almacenamiento, explotación)</li>
<li>Repositorio de Arquitectura</li>
</ul>
<p><br></p>
<h3 id="gobierno-de-datos">Gobierno de Datos</h3>
<h4 id="objetivo-3">Objetivo</h4>
<p>Implementar la estrategia de gobierno de datos que permita tener autoridad y control sobre la gestión de los activos de datos del FNA​</p>
<h4 id="oportunidades-retos-3">Oportunidades / Retos</h4>
<ul>
<li>Habilitar un FNA que gestione los datos como un activo​</li>
<li>Definir, aprobar, comunicar e implementar principios, políticas, métricas, herramientas y responsabilidades para la gestión de los datos​</li>
<li>Monitorear, mantener y guiar el cumplimiento de la políticas sobre la gestión y uso de datos ​</li>
</ul>
<h4 id="actores-3">Actores</h4>
<ul>
<li>Comité de gobierno del FNA​</li>
<li>Oficina de arquitectura FNA - Oficina de ​gobierno de datos</li>
<li>Especialista en Gobierno de Datos​</li>
</ul>
<h4 id="impacto-beneficio-3">Impacto / Beneficio</h4>
<ul>
<li>Cumplimiento regulatorio​</li>
<li>Eficiencia en proyectos de desarrollo y productos de datos​</li>
<li>Gestión de proveedores​</li>
</ul>
<h4 id="alcance-2">Alcance</h4>
<ul>
<li>Definir el gobierno de datos para el FNA​</li>
<li>Definir e implementar la estrategía de datos para el FNA​</li>
<li>Alinear el gobierno de datos con el gobierno SOA​</li>
</ul>
<h4 id="tecnología-2">Tecnología</h4>
<ul>
<li>Herramienta de gobierno de datos</li>
<li>Tablero de control de gobierno de datos</li>
</ul>
<p><br></p>
<h3 id="gestión-de-datos-maestros">Gestión de Datos Maestros</h3>
<h4 id="objetivo-4">Objetivo</h4>
<p>Implementar una estrategia de gestión de datos compartidos para conocer objetivos organizacionales reduciendo la redundancia de los datos y los costos de integración de los datos​</p>
<h4 id="oportunidades-retos-4">Oportunidades / Retos</h4>
<ul>
<li>Gestionar los datos compartidos de forma eficiente​</li>
<li>Proporcionar una fuente autorizada de datos maestros y de referencia conciliados y evaluados con calidad​</li>
<li>Cumplir con los requisitos de datos en el FNA​</li>
</ul>
<h4 id="actores-4">Actores</h4>
<ul>
<li>Unidades de Negocio​</li>
<li>Oficina de arquitectura FNA​</li>
<li>Consultores de Apoyo​</li>
</ul>
<h4 id="impacto-beneficio-4">Impacto / Beneficio</h4>
<ul>
<li>Reducir los riesgos asociados con la redundancia de datos, asegurando alta calidad, y reduciendo costos de integración de datos​</li>
<li>Habilitar y compartir activos de información transversalmente en los dominios de negocio y aplicaciones en la organización​</li>
<li>Desarrollar una versión confiable de la verdad para cada instancia de entidad conceptual como producto, lugar, cuenta, persona u organización ​</li>
</ul>
<h4 id="alcance-3">Alcance</h4>
<ul>
<li>Identificar múltiples instancias de la misma entidad representada dentro y entre fuentes de datos; construir y mantener identificadores y referencias cruzadas para permitir la integración de la información​</li>
<li>Implementación de una herramienta de Master Data Management (MDM)​</li>
<li>Integración de datos a través de estándares, modelos de datos comunes y patrones de integración​</li>
</ul>
<h4 id="tecnología-3">Tecnología</h4>
<ul>
<li>Herramienta de Master Data Management MDM</li>
<li>Tablero de control de datos maestros</li>
</ul>
<p><br></p>
<h3 id="devops">Devops</h3>
<h4 id="objetivo-5">Objetivo</h4>
<p>La adopción de la cultura y prácticas de Development Operations (DevOps) permite a la organización crear y entregar productos de software de forma más rápida y fiable</p>
<h4 id="oportunidades-retos-5">Oportunidades / Retos</h4>
<ul>
<li>El aprovisionamiento y la administración de la infraestructura: Los diversos ambientes de infraestructura (Ej. desarrollo, calidad, pre-producción y producción) podrían ser administrados a través de infraestructura como código</li>
<li>Implementación del código de la aplicación: El ciclo de vida de los componentes incluyendo la promoción en los distintos ambientes se gestiona a través de “pipelines”(o canalizaciones)</li>
</ul>
<h4 id="actores-5">Actores</h4>
<ul>
<li>Encargados de infraestructura y operaciones</li>
<li>Oficina de arquitectura</li>
<li>Consultores / fabricantes de apoyo</li>
</ul>
<h4 id="impacto-beneficio-5">Impacto / Beneficio</h4>
<ul>
<li>Software de mayor calidad</li>
<li>Escalabilidad de las Aplicaciones​</li>
<li>Velocidad en el Proceso de Desarrollo de Software ​</li>
</ul>
<h4 id="alcance-4">Alcance</h4>
<ul>
<li>Determinar los elementos que son susceptibles de transformar o que pueden hacer uso de Infraestructura cómo código</li>
<li>Implementación de una herramienta de “Servidor de Automatización”</li>
<li>Iniciar con prácticas de ‘Integración Continua’ y gradualmente apuntar a contar con ‘Despliegue Continuo’</li>
</ul>
<h4 id="tecnología-4">Tecnología</h4>
<ul>
<li>Servidor de Automatización</li>
<li>Repositorio de Código fuente</li>
<li>Kubernetes</li>
</ul>
<p><br></p>
<h3 id="arquitectura-de-aplicación-escalable-en-la-nube">Arquitectura de aplicación escalable en la​ Nube</h3>
<h4 id="objetivo-6">Objetivo</h4>
<p>Alcanzar mejores niveles de eficiencia operativa, mayor escalabilidad y rendimiento mejorado​</p>
<h4 id="oportunidades-retos-6">Oportunidades / Retos</h4>
<ul>
<li>Adopción de un enfoque de microservicios ​</li>
<li>Orquestación de contenedores</li>
<li>Uso de servicios administrados (PaaS)</li>
</ul>
<h4 id="actores-6">Actores</h4>
<ul>
<li>Encargados de infraestructura y operaciones</li>
<li>Oficina de arquitectura</li>
<li>Consultores / fabricantes de apoyo</li>
</ul>
<h4 id="impacto-beneficio-6">Impacto / Beneficio</h4>
<ul>
<li>Permitir capacidad de cómputo particular según sea requerido para soportar la carga. Este enfoque permite aprovechar de mejor forma la elasticidad que ofrece la nube.</li>
<li>Automatizar tareas como parches, aprovisionamiento de nodos y actualizaciones. Gestión dinámica con base a la demanda.</li>
<li>Evitar tareas administrativas, como el aprovisionamiento de hardware, parches de software, configuración, ajustes, recuperación de fallos y respaldos de seguridad​</li>
</ul>
<h4 id="alcance-5">Alcance</h4>
<ul>
<li>Determinar los elementos que son susceptibles de transformar o que pueden hacer uso de microservicios</li>
<li>Identificar los servicios o componentes que pueden implementarse como ‘servicios administrados’</li>
<li>Integrar esta arquitectura dentro del enfoque DevOps</li>
</ul>
<h4 id="tecnología-5">Tecnología</h4>
<ul>
<li>Servicios Administrados</li>
<li>Integración de sistemas</li>
<li>Kubernetes</li>
</ul>
<p><br></p>
<h3 id="infraestructura-de-datos-de-autoservicio">Infraestructura de datos de autoservicio</h3>
<h4 id="objetivo-7">Objetivo</h4>
<p>Soportar a nivel técnico la iniciativa de ‘Data Mesh’​</p>
<h4 id="oportunidades-retos-7">Oportunidades / Retos</h4>
<ul>
<li>Gestión de la seguridad​</li>
<li>Integración con sistemas existentes</li>
<li>Plataformas de datos en la nube / Escalabilidad​</li>
</ul>
<h4 id="actores-7">Actores</h4>
<ul>
<li>Encargados de infraestructura y operaciones</li>
<li>Oficina de arquitectura / Arquitecto de datos​</li>
<li>Consultores / fabricantes de apoyo</li>
</ul>
<h4 id="impacto-beneficio-7">Impacto / Beneficio</h4>
<ul>
<li>El área de IT solo está involucrada en aspectos técnicos y soportar la evolución con base en el mapa de ruta de “Data mesh” y cada equipo de dominio.</li>
<li>Cambio cultural para operar y monitorear este tipo de tecnología. </li>
<li>El autoservicio conlleva la capacidad de proporcionar y asignar los recursos de hardware y aplicaciones de la plataforma de datos a petición de los dominios de datos.</li>
</ul>
<h4 id="alcance-6">Alcance</h4>
<ul>
<li>Selección de herramientas y tecnologías con base en las iniciativas y proveedores con los que cuente la organización</li>
<li>Establecer políticas y procedimientos adecuados para garantizar que los datos estén protegidos y sean de alta calidad​</li>
<li>Monitorear adecuadamente el gasto (Modelo de operación FinOps)</li>
</ul>
<h4 id="tecnología-6">Tecnología</h4>
<ul>
<li>Servicios Administrados</li>
<li>Integración de sistemas</li>
<li>Microservicios</li>
</ul>
<p><br></p>
<h3 id="br010.-estandarización-de-integración-esb-fna">BR010. Estandarización de Integración ESB FNA</h3>
<h4 id="objetivo-8">Objetivo</h4>
<p>Actualizar las interfaces de integración y comunicación entre servicios gestionados por el bus de datos empresarial ESB IBM FNA.</p>
<p><br></p>
<h4 id="oportunidades-retos-8">Oportunidades / Retos</h4>
<ul>
<li>Incluir formas de integración más flexibles y cercanas a lo funcional vía API, granulares, reutilizables y mediadas por niveles de exposición (privadas, protegidas y públicas)</li>
<li>Migrar la integración entre aplicaciones hacia la exposición de funcionalidades independientes de la aplicación (API)</li>
<li>Estandarizar el modelo de integración e intercambio de datos</li>
</ul>
<h4 id="alcance-7">Alcance</h4>
<ul>
<li>Estructurar e implementar funcionalidades del producto en forma de operaciones y datos expuestos (API)</li>
<li>Establecer los nuevos consumidores de las API del producto</li>
<li>Actualizar y modificar a los consumidores actuales (redirección)</li>
</ul>
<h4 id="impacto-beneficio-8">Impacto / Beneficio</h4>
<ul>
<li>Proteger de impacto por cambios en C. Constructor a los consumidores y aplicaciones clientes del producto</li>
<li>Flexibilidad de modificación de las funcionalidades principales de C. Constructor</li>
<li>Aumentar el nivel de capacidades y tecnologías del ESB</li>
</ul>
<h4 id="actores-8">Actores</h4>
<ul>
<li>Unidades de negocio</li>
<li>Oficina de Arquitectura</li>
<li>Proveedores del FNA (Cobis, IBM, Oracle)</li>
<li>Consultores / fabricantes de apoyo</li>
</ul>
<h4 id="tecnologias-1">Tecnologias</h4>
<ul>
<li>Portafolio de API</li>
<li>Herramientas de diseño de API</li>
</ul>
<h3 id="a1.-gobierno-soa">A1. Gobierno SOA</h3>
<h4 id="objetivo-9">Objetivo</h4>
<p>Vigilar las relaciones entre las áreas de negocio (la vicepresidencia de operaciones y la vicepresidencia de crédito del FNA) y la implementación y diseño de soluciones SOA. El gobierno SOA del Fondo debe asistir en la aplicación y ejecución de un estándar de implementación, observación y puesta en marcha de soluciones SOA.</p>
<p><br></p>
<h4 id="oportunidades-retos-9">Oportunidades / Retos</h4>
<ul>
<li>Fortalecer el comité de gobierno SOA del FNA</li>
<li>Generar lineamientos y políticas de gobierno SOA</li>
<li>Promover la institucionalización de la arquitectura de referencia y del proceso de desarrollo de las soluciones SOA</li>
</ul>
<h4 id="actores-9">Actores</h4>
<ul>
<li>Comité de gobierno del FNA</li>
<li>Oficina de arquitectura FNA</li>
<li>Comité asesor </li>
</ul>
<h4 id="impacto-beneficio-9">Impacto / Beneficio</h4>
<ul>
<li>Lineamientos claros, libres de ambigüedad que permitan guiar la evolución de la arquitectura SOA 2.0 en la organización</li>
<li>Fuente única de planeación estratégica y control de la operación SOA</li>
<li>Vigilancia del cumplimiento de los niveles de servicio de las soluciones SOA​</li>
</ul>
<h4 id="alcance-8">Alcance</h4>
<ul>
<li>Crear e institucionalizar el comité de gobierno SOA del FNA</li>
<li>Definir los roles y responsabilidades para la instalación del comité</li>
<li>Elaborar los lineamientos, políticas y procesos de gobierno SOA del FNA</li>
<li>Medir las decisiones de gobierno sobre la arquitectura y el proceso de desarrollo de soluciones SOA</li>
</ul>
<h4 id="tecnología-7">Tecnología</h4>
<ul>
<li>Depósito centralizado SOA</li>
<li>Depósito documental</li>
</ul>
<p><br></p>
<h3 id="oficina-de-arquitectura">Oficina de arquitectura</h3>
<h4 id="objetivo-10">Objetivo</h4>
<p>Equipo de trabajo, conforme al gobierno SOA, a cargo de los roles de gestión de la tecnología y arquitectura en los ámbitos específicos de diseño de servicios SOA y componentes de software, infraestructura tecnológica y redes, aplicaciones y herramientas de software, y especialista estructuras de datos e información negocio. Rol general: gestión de conocimiento de la arquitectura de referencia.​</p>
<p><br></p>
<h4 id="oportunidades-retos-10">Oportunidades / Retos</h4>
<ul>
<li>Institucionalizar el rol y los deberes y responsabilidad del grupo de arquitectura</li>
<li>Hacer una gestión cada vez más efectiva del conocimiento en arquitectura del FNA​</li>
</ul>
<h4 id="actores-10">Actores</h4>
<ul>
<li>Dirección TI</li>
<li>Unidades de negocio​</li>
<li>Consultores de soporte​</li>
</ul>
<h4 id="impacto-beneficio-10">Impacto / Beneficio</h4>
<ul>
<li>Gestionar el conocimiento en arquitectura del FNA​</li>
<li>Proveer enlace directo con los consultores en arquitectura​</li>
<li>Gobernar la arquitectura de referencia de la organización​</li>
<li>Dar garantía de la alineación de las soluciones con áreas de negocio</li>
</ul>
<h4 id="alcance-9">Alcance</h4>
<ul>
<li>Definición de funciones y roles de los miembros de la oficina​</li>
<li>Definir procesos y niveles de servicio de la oficina​</li>
<li>Dar lanzamiento a la oficina​</li>
</ul>
<h4 id="tecnología-8">Tecnología</h4>
<ul>
<li>Arquitectura de referencia</li>
<li>Depósito de Arquitectura</li>
</ul>
<p><br></p>
<h3 id="arquitectura-de-referencia-soa-2.0">Arquitectura de referencia SOA 2.0</h3>
<h4 id="objetivo-11">Objetivo</h4>
<p>Evolucionar el desarrollo de los servicios SOA del FNA hacia diseños y tecnologías determinadas en la arquitectura de referencia 2.0 (como microservicios, REST, API, infraestructura Nube, …) y favorecer la adopción de un estilo de arquitectura orientado a eventos. ​</p>
<p><br></p>
<h4 id="oportunidades-retos-11">Oportunidades / Retos</h4>
<ul>
<li>Acelerar el desarrollo de las arquitecturas de solución​</li>
<li>Unificar el vocabulario con las áreas de negocio y TI​</li>
<li>Proveer soporte a los lineamientos y políticas de gobierno​ SOA/TI del Fondo</li>
</ul>
<h4 id="actores-11">Actores</h4>
<ul>
<li>Áreas de negocio críticas​</li>
<li>Oficina de arquitectura FNA​</li>
<li>Consultores y equipo de apoyo​</li>
</ul>
<h4 id="impacto-beneficio-11">Impacto / Beneficio</h4>
<ul>
<li>Reducción en tiempos y costos asociados a las soluciones SOA​</li>
<li>Mejora en la alineación entre negocio y TI​</li>
<li>Mitigación de rotación del equipo de arquitectura​</li>
<li>Visión global de soluciones de TI vs. requisitos del negocio​</li>
</ul>
<h4 id="alcance-10">Alcance</h4>
<ul>
<li>Diseño unificado de vistas funcional, despliegue, información, integración y tecnología​</li>
<li>Modelado en lenguaje y herramienta de diseño del FNA​</li>
<li>Crear y administrar las transiciones hacia la arquitectura versión 2.0</li>
<li>Utilización del depósito de arquitectura institucional​</li>
<li>Crear inventario de artefactos modelo-serie de aceleración de implementación</li>
</ul>
<h4 id="tecnología-9">Tecnología</h4>
<ul>
<li>Depósito´de Arquitectura</li>
<li>Herramientas de modelado</li>
</ul>
<p><br></p>
<h3 id="microservicios">Microservicios</h3>
<h4 id="objetivo-12">Objetivo</h4>
<p>Promover el uso de microservicios como estilo de arquitectura para ser integrado con la estrategia SOA existente en el FNA​</p>
<h4 id="oportunidades-retos-12">Oportunidades / Retos</h4>
<ul>
<li>Proponer esquemas de arquitectura desacopladas​</li>
<li>Actualizar el portafolio de servicios con tecnologías actuales mediante un estilo de arquitectura orientada a microservicios​</li>
<li>Agilidad en el desarrollo de soluciones ​</li>
</ul>
<h4 id="actores-12">Actores</h4>
<ul>
<li>Oficina de arquitectura​</li>
<li>Desarrollo / operaciones​</li>
<li>Consultores SOA​</li>
</ul>
<h4 id="impacto-beneficio-12">Impacto / Beneficio</h4>
<ul>
<li>Actualización tecnológica​</li>
<li>Disminución en los costos y tiempos asociados al desarrollo de soluciones SOA​</li>
<li>Modernización y utilización de los mecanismos de integración de servicios​</li>
</ul>
<h4 id="alcance-11">Alcance</h4>
<ul>
<li>Revisión del proceso de desarrollo de software del FNA​</li>
<li>Apropiación de técnicas de desarrollo ágil - DevOps​</li>
<li>Metodologías de análisis, diseño e implementación orientadas a microservicios​</li>
<li>Adecuación de la infraestructura para soportar los flujos de despliegue continuo / integración continua y desarrollo de Microservicios​</li>
</ul>
<h4 id="tecnología-10">Tecnología</h4>
<ul>
<li>Herramientas de desarrollo</li>
<li>Herramientas de despliegue continuo / IC</li>
<li>Tecnologías cloud</li>
</ul>
<p><br></p>
<h4 id="portafolio-de-api">Portafolio de API</h4>
<h4 id="objetivo-13">Objetivo</h4>
<p>Establecer un portafolio institucional de funcionalidades, recursos y datos expuestos en API, que sirva como fuente única de la verdad sobre las versiones, tecnologías y características de todas las API de la organización​</p>
<h4 id="oportunidades-retos-13">Oportunidades / Retos</h4>
<ul>
<li>Gestión y estructuración del portafolio de API del FNA​</li>
<li>Definición de los contratos de las API, las tecnologías y los atributos de calidad de las API de la organización​</li>
</ul>
<h4 id="actores-13">Actores</h4>
<ul>
<li>Unidades de negocio​</li>
<li>Oficina de Arquitectura​</li>
<li>Proveedores del FNA (Cobis, IBM, Oracle)​</li>
<li>Consultores / fabricantes de apoyo​</li>
</ul>
<h4 id="impacto-beneficio-13">Impacto / Beneficio</h4>
<ul>
<li>Mejorar el gobierno y las estrategias de evolución y mantenimiento de las API del FNA​</li>
<li>Mayor control en el diseño, desarrollo y operación de las API​</li>
<li>Punto único de búsqueda y localización de API y servicios en la organización​</li>
</ul>
<h4 id="alcance-12">Alcance</h4>
<ul>
<li>Estructuración del portafolio, en API privadas, públicas y consorcio​</li>
<li>Diseño de la estructura y organización de las API de la organización​</li>
<li>Definición de lineamientos y políticas de uso de las API ​</li>
<li>Tecnologías e infraestructura requeridas para el desarrollo, pruebas y operación de las diferentes API​</li>
</ul>
<h4 id="tecnología-11">Tecnología</h4>
<ul>
<li>Portafolio de API</li>
<li>Herramientas de diseño de API</li>
</ul>
<p><br></p>
<h3 id="service-mesh">Service Mesh</h3>
<h4 id="objetivo-14">Objetivo</h4>
<p>Mejorar de la comunicación, estabilidad (reintento y tolerancia a fallos) y la disponibilidad de servicios SOA y microservicios del Fondo mediante el uso de proxys.</p>
<h4 id="oportunidades-retos-14">Oportunidades / Retos</h4>
<ul>
<li>Modernizar los mecanismos de orquestación de servicios​</li>
<li>Proponer alternativas para el manejo de escalabilidad, seguridad y monitoreo de servicios​</li>
<li>Proponer esquemas de operación de servicios orientados a la nube​</li>
</ul>
<h4 id="actores-14">Actores</h4>
<ul>
<li>Oficina de Arquitectura FNA​</li>
<li>Consultores de Apoyo​</li>
</ul>
<h4 id="impacto-beneficio-14">Impacto / Beneficio</h4>
<ul>
<li>Apoyo a la estrategia de transición hacia microservicios​</li>
<li>Mayor control y monitoreo de los microservicios​</li>
<li>Posibilidad de un despliegue multi-cloud de los microservicios​</li>
<li>Mejorar mecanismos de comunicación y control de los micro servicios​</li>
</ul>
<h4 id="alcance-13">Alcance</h4>
<ul>
<li>Diseño de arquitectura ​</li>
<li>Instalación de una herramienta que implemente el patrón service-mesh (Control Plan – Data plane)​</li>
<li>Prueba piloto inicial con un subconjunto de servicios​</li>
<li>Extensión de la prueba piloto a un proceso de misión crítica​</li>
</ul>
<h4 id="tecnología-12">Tecnología</h4>
<ul>
<li>Implementación service Mesh: Istio, Amazon App Mesh, Meshery</li>
<li>Kubernetes</li>
<li>Docker</li>
</ul>
<p><br></p>
<h3 id="plataforma-híbrida-de-integración">Plataforma Híbrida de Integración</h3>
<h4 id="objetivo-15">Objetivo</h4>
<p>Establecer un esquema de integración orientado a mensajes integrado con mecanismos de integración síncronos​</p>
<h4 id="oportunidades-retos-15">Oportunidades / Retos</h4>
<ul>
<li>Potencializar el uso de la tecnología de integración instalada (ESB y Mensajería)​</li>
<li>Modernizar los esquemas de integración de la organización con esquemas híbridos (síncronos y asíncronos)​</li>
<li>Propender por arquitecturas orientadas a eventos​</li>
</ul>
<h4 id="actores-15">Actores</h4>
<ul>
<li>Encargados de infraestructura y operaciones​</li>
<li>Oficina Arquitectura de FNA​</li>
<li>Consultores de apoyo​</li>
</ul>
<h4 id="impacto-beneficio-15">Impacto / Beneficio</h4>
<ul>
<li>Disminución de la complejidad asociada a la orquestación de servicios​</li>
<li>Desacoplamiento de las soluciones y servicios del ecosistema de servicios de la organización​</li>
<li>Menor dependencia del bus de servicios​</li>
</ul>
<h4 id="alcance-14">Alcance</h4>
<ul>
<li>Diseño de arquitectura​</li>
<li>Prueba piloto con orquestación y coreografía​</li>
<li>Extensión de la prueba a un proceso misional​</li>
</ul>
<h4 id="tecnología-13">Tecnología</h4>
<ul>
<li>ESB</li>
<li>Plataforma de Mensajería</li>
</ul>
<p><br></p>
<h1 id="fase-3-soa-objetivo-1">Fase 3: SOA Objetivo</h1>
<h1 id="contenido-de-los-productos-contractuales-181-2020-1">Contenido de los Productos Contractuales, 181-2020</h1>
<h1 id="producto-10-pr10.-hoja-de-ruta-soa">Producto 10: PR10. Hoja de Ruta SOA</h1>
<p>La hoja de ruta SOA (o el plan de migración) es la programación en el tiempo de un rumbo viable de cambios (migración) en la arquitectura SOA actual del FNA con la intención de moverla de un estado a otro. Plantea el despliegue en el tiempo de la ejecución de las capacidades y proyectos de migración (rollout) de la arquitectura SOA actual del FNA que resulten en la arquitectura SOA candidata con arreglo al portafolio de iniciativas y proyectos (producto 9) del presente diagnóstico. La hoja de ruta plantea además un programa de los estadios intermedios requeridos, y sus controles, para llegar a la arquitectura SOA objetivo coordinado con la oficina de proyectos del FNA para asegurar</p>
<p><strong>Nota</strong>: los análisis de este producto están dirigidos a cumplir los objetivos del proyecto SOA: dependencia de proveedor (OBJ1), fortaleza SOA de las aplicaciones (OBJ2), y tiempo de mercado (OBJ3).</p>
<p><br></p>
<h2 id="justificación-1">Justificación</h2>
<p>Procura la articulación y gestión de dependencias de las iniciativas SOA del portafolio de la arquitectura SOA (producto 9 de este diagnóstico) con otros proyectos del FNA, a fin de economizar recursos o evitar colisiones. Asegura a la gerencia de tecnología del FNA los criterios para la vigilancia y los puntos de control y revisión de las migraciones transitorias y estables con el propósito de que los equipos implementen los proyectos conforme a los diseños. En términos generales, <em>este producto es el responsable de organizar la transformación de la arquitetura en implementación</em>.</p>
<h2 id="contenidos-1">Contenidos</h2>
<ol type="1">
<li>Hoja de ruta de los proyectos de cambio</li>
<li>Estimaciones y análisis de impacto y dependencia entre los cambios en el segmento de la empresa</li>
<li>Consideraciones para la ejecución de los primeros cambios</li>
<li>Puntos de control en la ejecución de la hoja de ruta SOA</li>
</ol>
<p><br></p>
<h2 id="criterios-de-aceptación-1">Criterios de Aceptación</h2>
<ul>
<li>Lista de cambios para el segmento FNA: ítems incluídos, por mejorar, nuevos y eliminados</li>
<li>Hoja de ruta preliminar hacia un objetivo de mejora</li>
</ul>
<hr />
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Hoja de ruta de los proyectos de cambio</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Análisis de brecha, GAP, Comparativa</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="hoja-de-ruta-e-service-fna-de-los-proyectos-de-cambio">Hoja de Ruta E-Service FNA de los Proyectos de Cambio</h2>
<figure>
<img src="images/hojaruta1.png" />
</figure>
<p><a href="">Imagen 1.</a> Proyectos de cierre de brecha FNA. Prioridades, dependencias, secuencia, puntos de control de la evolución de la arquitectura de referencia SOA 2.0 del Fondo.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<h2 id="asunto">Asunto</h2>
<p>La ejecución de la hoja de ruta E-Service (diagnóstico SOA) plantea la implementación de los proyectos de cierre de brechas que impacten a los problemas diagnosticados en dicho proyecto. Estos son: a la flexibilidad de negocio, al fortalecimiento de construcción y diseño de servicios, y a la independencia de proveedor, en el ámbito de las vicepresidencias de Crédito y de Operación, en el período de ejecución 2023.</p>
<p>Como resultado del inicio de la ejecución de la hoja de ruta el Fondo Nacional del Ahorro (FNA) procura 1) aumentar las capacidades de desarrollo de soluciones y requerimientos, y 2) modernizar y aumentar la capacidad del uso tecnológico de estas soluciones.</p>
<p>Puntualmente, la implementación (todos los proyectos) de la hoja de ruta, tal como está diagnosticada por E-Service, buscan los objetivos de:</p>
<pre><code>• Flexibilidad y tiempo de mercado (OBJ3)
• Fortaleza SOA de las aplicaciones (OBJ2)
• Independencia de proveedor (OBJ1)</code></pre>
<p>Para lo cual, la hoja de ruta E-Service está orientada a impactar los siguientes brechas y oportunidades:
• OP1. Instaurar la figura de gobierno SOA, capacidad, proceso y recursos
• OP2. Mejorar proceso de diseño, construcción y DevOps de soluciones SOA
• OP3. Mejorar la oferta de servicios analíticos en segmento FNA
• OP4. Aumentar el nivel de utilización de la Tecnología SOA del FNA
• OP5. Desarrollo de Servicios FNA guiada por la arquitectura de referencia 2.0
• OP6. Gestión de la Tecnología (gobierno) orientada por arquitectura 2.0
• OP7. Articulación y fortalecimiento del equipo de arquitectura del FNA junto a proveedores
• OP8. Monitoreo de los índices de eficacia de los servicios FNA</p>
<p><br></p>
<h2 id="alcance-15">Alcance</h2>
<p>Para el período 2023, la implementación de la hoja de ruta E-Service impactará los objetivos de Flexibilidad (OBJ3) y Fortalecimiento (OBJ2), mediante el incremento de las capacidades del FNA de diseño e implementación de soluciones de negocio (ver todas las capacidades FNA, diagnóstico E-Service, fase 1), en el dominio de aplicaciones y servicios solamente.</p>
<p>Las capacidades impactadas en el alcance del proyecto hoja de ruta E-Service, período 2023, para el dominio de aplicaciones y servicios
• CAP1. Capacidad de gestión de tecnología
• CAP2. Entrega de productos y funcionalidades.</p>
<p>El incremento de las capacidades de gestión de tecnología (TI), y la de entrega de productos y funcionalidades, incluidas en el alcance del período 2023, se realizará mediante la ejecución de los proyectos aquí indicados:</p>
<pre><code>1. (proy. cierre brecha) PRY01. Gobierno SOA FNA --Incremento 1: dominio de aplicaciones y servicios únicamente
2. (proy. cierre brecha) Arquitectura Referencia --Incremento 1: dominio de aplicaciones y servicios únicamente</code></pre>
<p>El alcance del proyecto de ejecución de la hoja de ruta, período 2023, es el ilustrado en la imagen siguente.</p>
<figure>
<img src="images/vistaevolucion.png" />
</figure>
<p><a href="">Imagen 1.</a> Vista de evolución de capacidades dentro del alcance del proyecto hoja de ruta E-Service, período 2023, dominio de aplicaciones y servicios. Capacidades incrementadas para impactar a los objetivos Flexibilidad (OBJ3) y Fortalecimiento (OBJ2).</p>
<p>Por consecuencia de estos los proyectos PRY01 y PRY02 de la hoja de ruta, en el período 2023, y del consiguiente incremento en las capacidades del FNA incluidas en este alcance, la arquitectura SOA del Fondo evolucionará a su vez en dos versiones nuevas, como sigue</p>
<figure>
<img src="images/vistaevolarquitectura.png" />
</figure>
<p><a href="">Imagen 2.</a> Vista de evolución de arquitectura de referencia FNA a razón del las capacidades incrementadas.</p>
<p><br></p>
<h2 id="componentes-modificados">Componentes modificados</h2>
<p>Los aumentos de versión de la arquitectura SOA del FNA implica que ítems de trabajo, componentes de software, aplicaciones, tecnologías o recursos de capital humano deban ser modificados (aumentado de versión).</p>
<p>Con propósito únicamente ilustrativo de los ítems que pueden ser sujetos de variante (especialización) por concepto de los incrementos de la arquitectura del FNA, dominio de aplicaciones y servicios únicamente, bajo las condiciones de tiempo y recursos del proyecto de implemenatción de hoja de ruta E-Service, período 2023, presentamos a continuación una lista de aplicaciones de software que pueden llegar a cambiar (otros ítems se no presentes en este ejemplo pueden ser impactados).</p>
<figure>
<img src="images/vistaitemsarq.png" />
</figure>
<p><a href="">Imagen 2.</a> Aplicaciones de software del FNA involucrados en los incrementos de versión de la arquitectura de referencia.</p>
<p><br></p>
<h2 id="equipo-base-del-proyecto">Equipo Base del Proyecto</h2>
<p>Organizado por proyecto.</p>
<h3 id="pry01.-gobierno-soa-fna-incremento-1-dominio-de-aplicaciones-y-servicios">PRY01. Gobierno SOA FNA –Incremento 1: dominio de aplicaciones y servicios</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Trabajo</th>
<th style="text-align: left;">Dedicación</th>
<th style="text-align: left;">Horas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Director / Gerente proyecto (Stefanini)</td>
<td style="text-align: left;">Calidad del proyecto</td>
<td style="text-align: left;">100% o 50%</td>
<td style="text-align: left;">1200 **</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nota: este recurso puede ser individual, o común entre ambos proyectos del alcance</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Especialista SOA 1, o Arquitectura empresarial (Stefanini/MEGA)</td>
<td style="text-align: left;">Referente para montaje de gobierno SOA, modelamiento procesos, software y servicios</td>
<td style="text-align: left;">100%</td>
<td style="text-align: left;">1200</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nota: considerar un perfil parcial de apoyo al especialista SOA, experiencia en herr. MEGA</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Especialista construcción software, servicios y componentes (Stefanini)</td>
<td style="text-align: left;">Referente para diseño de servicios y software, modelamiento procesos, software y servicios</td>
<td style="text-align: left;">100%</td>
<td style="text-align: left;">1200</td>
</tr>
<tr class="even">
<td style="text-align: left;">Personal del FNA</td>
<td style="text-align: left;">Receción y ejecución de gobierno SOA, modelamiento software y servicios</td>
<td style="text-align: left;">*</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="odd">
<td style="text-align: left;">○ Especialista SOA</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">○ Especialista(s) construcción software</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h3 id="pry02.-arquitectura-referencia-incremento-1-dominio-de-aplicaciones-y-servicios">PRY02. Arquitectura Referencia –Incremento 1: dominio de aplicaciones y servicios</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Trabajo</th>
<th style="text-align: left;">Dedicación</th>
<th style="text-align: left;">Horas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Director / Gerente proyecto (Stefanini)</td>
<td style="text-align: left;">Calidad del proyecto</td>
<td style="text-align: left;">100% o 50%</td>
<td style="text-align: left;">1200</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nota: este recurso puede ser individual, o común entre ambos proyectos del alcance</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Especialista SOA o Arquitectura de software (Stefanini)</td>
<td style="text-align: left;">Referente y vigilancia de implementación y diseños, modelamiento software y servicios</td>
<td style="text-align: left;">100%</td>
<td style="text-align: left;">1200</td>
</tr>
<tr class="even">
<td style="text-align: left;">Especialista construcción software, servicios y componentes (Stefanini)</td>
<td style="text-align: left;">Implementación y vigilancia de implementación y diseños, modelamiento software y servicios</td>
<td style="text-align: left;">100%</td>
<td style="text-align: left;">1200</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Personal del FNA</td>
<td style="text-align: left;">Receción y ejecución de diseños, requerimientos, e implementación, SOA, modelamiento requerimientos, procesos y servicios</td>
<td style="text-align: left;">*</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="even">
<td style="text-align: left;">○ Especialistas de aplicaciones pertenecientes al incremento de versión de la arquitectura FNA (ver Figura3. Aplicaciones de software del FNA involucrados en los incrementos de versión de la arquitectura de referencia)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">○ Líder funcional de aplicaciones pertenecientes al incremento de versión de la arquitectura FNA</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>(*) La dedicación y horas de participación de los recursos internos la dispone el FNA.</p>
<p>(**) 160 hrs/mes * 8 meses = 1,280 hrs proy</p>
<p><br></p>
<h2 id="plan-de-trabajo">Plan de Trabajo</h2>
<p>Organización del proyecto. El proyecto está organizado en 4 fases. La fase de Levantamiento (LVT) presentada abajo en la imagen determina en detalle los elementos de gobierno y de la arquitectura que se evolucionarán en los dos incrementos planteados en el alcance consignado arriba, periodo 2023, que se corresponden con las fases 2 y 3 de la imagen abajo.</p>
<figure>
<img src="images/vistaimplementacion.png" />
</figure>
<p><a href="">Imagen 4.</a> Plan de Implementación del Proyecto Hoja de Ruta E-Service FNA, 2023. Abril 2023 a Dic 2023. Ver 1.0</p>
<p>La fase 1, Gobierno, diseña y determina los procesos de gestión de mejoramiento de la arquitectura SOA y la vigilancia de riesgo técnico que regirán en adelante en el FNA. Estos mismo procesos de gobierno aplican en las fases sucesivas del proyecto.</p>
<p>Las fases 2 y 3 impactan directamente a elementos de la arquitectura SOA del FNA, esto es, sistemas de información, herramientas de software, servicios, o componentes seleccionados en la fase Levantamiento.</p>
<p>Finalmente, la fase 4 se encarga de ejecutar los indicaddores de medición de desempeño, tanto del gobierno como de los incrementos de evolución de la arquitectura de referencia 2.0 (ver resultados del diagnóstico E-Service, 2022).</p>
<p><br></p>
<h2 id="entregables">Entregables</h2>
<p>Fase LVT
* Detalle de los ítems de arquitectura impactados por el proyecto
* Detalle de los recursos, herramientas, roles, responsabilidades y participanes</p>
<p>Fase 1
* Procesos de mejoramiento de diseño y vigilancia de riesgos técnicos
* Modelos actualizados de los ítems de arquitectura impactados por el proyecto</p>
<p>Fase 2
* ítems de arquitectura incrementados en ejecución
* Análisis de impacto y modelos actualizados de los ítems de arquitectura</p>
<p>Fase 3
* ítems de arquitectura incrementados en ejecución
* Análisis de impacto y modelos actualizados de los ítems de arquitectura</p>
<p>Fase 4
* Métricas de desempeño gobierno e implementación SOA
* Modelos actualizados de los ítems de arquitectura impactados por el proyecto</p>
<h2 id="costo-beneficio-aproximado">Costo Beneficio (aproximado)</h2>
<p>…</p>
<p><br></p>
<h2 id="consideraciones">Consideraciones</h2>
<p>…</p>
<h2 id="resumen-de-problemáticas-del-diagnóstivo-de-madurez-soa-del-fna">Resumen de Problemáticas del Diagnóstivo de Madurez SOA del FNA</h2>
<ol type="1">
<li><p>FNA realiza soluciones de herramientas de software y servicios SOA a la medida para responder a las necesidades y requerimientos de información de las áreas funcionales, en particular la vicepresidencia de Crédito y la de Operaciones (segmento de la empresa objeto de este diagnóstico). El peligro con esto es que hace a la operación (creación, uso y mantenimiento) y a la gestión (mejora, explotación y distribución) de los datos proclive a la proliferación de silos de datos.</p></li>
<li><p>El análisis del repositorio SOA del FNA evidencia que existen modelos de datos independientes para las diferentes aplicaciones. Por lo tanto, <em>no existe un modelo de datos común o canónico para la organización</em>. Así mismo, existen inconvenientes en la gestión del ciclo de vida del dato debido a que existen algunas dependencias de algunos los proveedores para incluir reglas de negocio o nuevas entidades de datos.</p></li>
<li><p>Desde la perspectiva de madurez SOA, la primera iteración del proceso de evaluación de madurez SOA del FNA determina que el <em>FNA es una empresa reactiva</em>, resultado además que es consistente en todas las dimensiones de OSIMM diagnosticadas (negocio, aplicaciones, gobierno, etc.), y con el numeral 1 de esta lista.</p></li>
<li><p>Mejorar los indicadores de eficacia y madurez SOA, como el de soporte y flexibilidad de negocio, el de diseño de soluciones, servicios y aplicaciones, gestionar los cambios desde arquitectura, mejorar los problemas de uso y gestión de la información e infraestructura. Niveles bajos causados principalmente por (1.) El bajo grado de independencia de proveedor: (ver imagen abajo) <em>38 puntos / 100 puntos</em> (2.) Baja flexibilidad y tiempos de entrega (time-to-market): <em>20 / 100 puntos</em>. <strong>Nota</strong>. Estas dos problemáticas deben las ser primeras en ser atendidas en un futuro gobierno SOA del Fondo. <img src="images/madurezInfo_graf.png" /></p></li>
<li><p>El futuro gobierno SOA, en conjunto con el plan de la Dirección de Tecnología del FNA, y el próximo plan estratégico (febrero del 2023) debe procurar la ejecución y los recursos necesarios para la realización de estas iteraciones que tienen por objeto profundizar la adopción SOA del Fondo hasta llevarla al siguiente estadio: superar los 50 puntos de madurez SOA.</p></li>
<li><p>Para aumentar las capacidades de la arquitectura es necesario realizar un análisis de capacidades de la arquitectura que responda a las capacidades del negocio (alineación negocio, arquitectura). De igual nivel de importancia que el caso anterior, esta problemática del aumento de las capacidades debe hacer parte de los planes de la Dirección de Tecnología del FNA y del próximo plan estratégico (febrero del 2023).</p></li>
<li><p>El gobierno SOA debe primordialmente aumentar el índice de independencia de proveedor del Fondo. El resultado interno (ver imagen abajo) en la dimensión de Gobierno obtuvo el puntaje más bajo en este análisis: <em>35 / 100 puntos</em> (los otros análisis, flexibilidad y fortaleza SOA, en esta misma dimensión obtuvieron en promedio 40 puntos).</p></li>
</ol>
<h2 id="análisis-de-las-fortalezas-soa-del-fna">Análisis de las Fortalezas SOA del FNA</h2>
<ol type="1">
<li><p>Para mejorar las fortalezas SOA es necesario subsanar los problemas de acoplamiento del proveedor Cobis a las capacidades de negocio del FNA, y mantener bajo control los grados de dependencia de los servicios SOA que evidenció la revisión del portafolio de servicios SOA del FNA.</p></li>
<li><p>Acoplamiento de las capacidades de negocio del FNA a Cobis. <em>Existen más de 96 relaciones</em> entre las capacidades de negocio y las herramientas de software de Cobis (ver <a href="N003e.CatálogodeServiciosFNA-1.md">N003e. Catálogo de Servicios FNA-1</a>, y <a href="N003e.CatálogodeServiciosFNA-2.md">N003e. Catálogo de Servicios FNA-2</a>). Todo acoplamiento, que en este caso es con el proveedor, produce rigidez. Esta rigidez es causa de una problemática que afecta, en primer grado a la flexibilidad de negocio, y segundo, al tiempo de mercado. Todo acoplamiento produce rigidez y esta es la causa de los problemas que el FNA tiene en flexibilidad de negocio y tiempo de mercado.</p></li>
<li><p>El grado de relación de dependencia de las aplicaciones proveedoras de servicios es alto y requiere de intervención y un gobierno que prevenga y controle su aumento. El aumento de las relaciones entre los servicios del portafolio, similar a la proliferadción de índices en una base de datos, ocurre en el portafolio SOA del Fondo causa problemas de complejidad, mantenimiento y rigidez al cambio. <em>Aplicaciones como Cobis Clientes y Cobis Cartera suman más de 60 relaciones con otros servicios</em> (ver <a href="N003e.CatálogodeServiciosFNA-2.md">N003e. Catálogo de Servicios FNA-2.md</a>). <em>En total, el grupo de aplicaciones de Cobis suma más de 100 relaciones a servicios SOA del portafolio del Fondo</em>. Esto implica que los esfuerzos de realizar cambios evolutivos, optimización, o de mantenimiento se acrecienten: un cambio en una aplicación con alto grado de dependencia requiere asegurar la calidad (QA) de las n-relaciones que esta tenga con los servicios del portafolio SOA. Lo mismo que termina efectando al tiempo de mercado. Ver anexo 1.</p></li>
<li><p>Al contrario de la cantidad creciente de relaciones de los servicios por administrar (más de 100 relaciones de aplicaciones a servicios), <em>el nivel de relación de los servicios con los requerimientos de las vicepresidencias de Crédito y la vicepresidencia de Operaciones es baja</em> (ver <a href="N003e.CatálogodeServicios.md">N003e. Catálogo de Servicios FNA-1a</a>). La baja relación de los requerimientos con las áreas complica la gestión de las demanda y afecta a la eficacia del portafolio de servicios que empieza a llenarse de servicios de tipo intermediarios o servicios utilitarios que terminan consumiento mayores recursos que los servicios de negocio, que son los que responden a las áreas de negocio en sus términos.</p></li>
<li><p>La problemática de tipo general que agrava todas las anteriores y complica a los análisis de arquitectura es las redundancias y desactualizaciones que el repositorio de arquitectura del Fondo presenta. Algunos problemas que esto causa son la dificultad del entendimiento de los conceptos y modelos de arquitectura del FNA, sobresfuerzo para mantener la relevancia de la arquitectura (al equipo de arquitectura del FNA) y, por último, debilita la función del gobierno SOA (sin repositorio no hay gobierno).</p></li>
</ol>
<h2 id="oportunidades-soa-del-fna">Oportunidades SOA del FNA</h2>
<p>Las problemática de rigidez de cambio, entendida como el tiempo de mercado, o el tiempo que toma entregar a producción una mejora, cambio o funcionalidad evidenciada en los diagnósticos de acoplamiento de las capacidades de negocio al proveedor <a href="ResultadoDiagnósticoSituaciónActual-3.md">Resultado Diagnóstico Situación Actual-3</a>, la prevalencia del enfoque ascendente, esto es desde el provedor hacia el negocio <a href="ResultadoDiagnósticoSituaciónActual-1a.md">Resultado Diagnóstico Situación Actual-1a</a>, los diagnósticos anteriores en aspectos como tecnología, decisiones de los tipos de servicios del portafolio del FNA, y del bajo uso de soluciones modernas de gestión de reglas de negocio dejan oportunidades y retos. A continuación veremos algunas de estas oportunidades que se pueden capitalizar, así como otras que son de carácter necesario.</p>
<p><br></p>
<h2 id="oportunidad-1.-desarrollo-de-servicios-fna-guiada-por-la-arquitectura-de-referencia">Oportunidad 1. Desarrollo de Servicios FNA Guiada por la Arquitectura de Referencia</h2>
<p>Con base en el análisis de alineación SOA (ver <a href="ResultadoDiagnósticoSituaciónActual-1">Resultado Diagnóstico Situación Actual-1</a>, que muestra que el enfoque predominante no es el descendente, si no que, los servicios del portafolio del FNA provienen más de las aplicaciones de los proveedores que desde las vicepresidencia de Crédito o de Operaciones, tenemos la oportunidad de reforzar la arquitectura de referencia SOA del Fondo.</p>
<figure>
<img src="images/vistafuncional.png" />
</figure>
<p><a href="">Imagen.</a> Arquitectura de referencia como guía para el desarrollo del portafolio SOA.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<h2 id="oportunidad-2.-monitoreo-de-los-índices-de-eficacia-de-servicios-fna">Oportunidad 2. Monitoreo de los índices de eficacia de Servicios FNA</h2>
<p>La oportunidad de monitorear el desarrollo SOA con la arquitectura de referencia asegura una mejora alineación y focalización de los esfuerzos operativos (del día a día), evolutivos, correctivos, y los de inversión de tecnología para el negocio, que son planes de mediano y largo plazo.</p>
<p><br></p>
<h2 id="oportunidad-3.-mayor-utilización-de-la-tecnología-soa-del-fna">Oportunidad 3. Mayor Utilización de la Tecnología SOA del FNA</h2>
<p>En el FNA hay un campo grande de análisis para determinar con exactitud lo que señalamos en este diagnóstico inicial SOA del Fondo. Se trata del nivel de utilización de cada uno de las características de las plataformas, soluciones y productos de proveedor en los que el FNA invierte.</p>
<p>Al momento no hay tal información en el repositorio del FNA</p>
<p><br></p>
<h2 id="oportunidad-4.-impulsar-la-figura-de-gobierno-soa-y-de-arquitectura">Oportunidad 4. Impulsar la figura de Gobierno SOA y de Arquitectura</h2>
<p>Existe la oportunidad de impulsar la función de un gobierno SOA basado en el repositorio de arquitectura del FNA que contiene información inicial para este objetivo (ver la tabla siguiente, clasificación de información del repositorio del Fondo).</p>
<table>
<thead>
<tr class="header">
<th><strong>Contenidos FNA</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Servicios</td>
<td><strong>543</strong></td>
</tr>
<tr class="even">
<td>Arquitectura</td>
<td>352</td>
</tr>
<tr class="odd">
<td>Información</td>
<td>248</td>
</tr>
<tr class="even">
<td>Aplicación</td>
<td>107</td>
</tr>
<tr class="odd">
<td>Funcional</td>
<td>61</td>
</tr>
<tr class="even">
<td><strong>Total Contenidos FNA revisados</strong></td>
<td><strong>1311</strong></td>
</tr>
</tbody>
</table>
<p><a href="">Tabla.</a> Clasificación de información del repositorio del FNA.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<p>Sin embargo, antes de dar paso en este sentido hay que subsanar las problemática encontradas en la información de los modelos y conceptos del repositorio.</p>
<ol type="1">
<li>Redundancias y el atraso de la información de los modelos y conceptos.</li>
<li>Incompletitud en el modelamiento de conceptos, como las capacidades de negocio, o los procesos de negocio del FNA.</li>
<li>Inconsistencia en el lenguaje de modelado. Falta estandarizar nombres y formas de representación de los mismo conceptos entre modelos.</li>
</ol>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th>Tema</th>
<th>Portafolio de iniciativas y brechas: <strong>Plan de comisionamiento e implementación de Infraestrutura</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Palabras clave</td>
<td>SOA, Proyecto de cierre brecha, Brecha, Infraestructura</td>
</tr>
<tr class="even">
<td>Autor</td>
<td></td>
</tr>
<tr class="odd">
<td>Fuente</td>
<td></td>
</tr>
<tr class="even">
<td>Version</td>
<td>2bca8e1 del 31 Aug 2023</td>
</tr>
<tr class="odd">
<td>Vínculos</td>
<td><a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">N003a Vista Segmento SOA FNA</a></td>
</tr>
</tbody>
</table>
<p><br></p>
<h2 id="plan-de-comisionamiento-e-implementación-de-infraestrutura">Plan de Comisionamiento e Implementación de Infraestrutura</h2>
<p>A partir de la comparativa de la industria (ver Fase 2, <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">05a. Comparativa FNA industria</a>), y de otros diagnósticos de fases anterior de este ejercicio, como el dominio de infraestructura (<a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">08c. Dominio de infraestructura</a>) de la arquitectura de referencia (<a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">08a. Arquitectura-referencia-v2</a>), la vigilancia y avances de la industria (<a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">07b. Vigilancia avances de la industria</a>), encontramos los siguientes proyectos de infraestructura a incluir en el plan de comisionamiento o adquisición de tecnología del FNA.</p>
<p>Conjugando todos los diagnósticos indicados, listamos los proyectos de adquisición y/o montaje de infraestructura requeridos para el plan de comisionamiento o adquisición tecnológica del FNA.</p>
<h3 id="arquitectura-soa">Arquitectura SOA</h3>
<p>Adquisición de licencias de la herramienta de modelado de arquitectura y de herramientas adicionales de modelado de arquitecturas de servicios, como Integration Designer de IBM, licencias de ejecución y programación de modelos Archimate.</p>
<p><br></p>
<h3 id="gobierno-soa">Gobierno SOA</h3>
<p>Adicional a la infraestructura de software relacionado con el Gobierno SOA, el FNA debe considerar en su plan de adquisición de tecnología e infraestructura las indicadas a continuación:
(Arquitectura de referencia SOA) servidores de aplicación y funciones de nube sin servidor para implementar la mejora de servicios SOA incorporada en la arquitectura de referencia 2.0 (<em>service mesh</em>), servidores o servicios de aplicación para la implementación de GraphQL, y una subscription individual adicional con el proveedor de nube (CSP) adjudicado al FNA. Sumamos a estas adquisiciones de infraestructura otras de índole operativa, pero complementarias, e igualmente necesarias. Se tratan de las herramienta y licencias de documentación y generación de contenido técnico, como manuales, procedimientos, lecciones, configuración de componentes, entre otros.</p>
<p>Como un apéndice del plan de adquisición que estamos recomendando al FNA, se encuentran la contratación de los recursos de capital humano que entran en la operación del gobierno SOA. Sin bien, esto no es infraestructura, sí son recursos que la operan. El equipo de trabajo requerido conforme el modelo de gobierno SOA presentado aquí se compone del capital humano en los roles de gestión de la tecnología y arquitectura en los ámbitos de diseño de servicios SOA y componentes de software, infraestructura tecnológica y redes, aplicaciones de solución y herramientas de software, y del especialista de las estructuras de datos e información del negocio.</p>
<figure>
<img src="images/equipo-gob.png" />
</figure>
<p><a href="">Imagen 2.</a> Roles y Grupos de trabajo del gobierno SOA del FNA.</p>
<p><em>Fuente: elaboración propia.</em></p>
<p><br></p>
<h3 id="estrategia-de-versionamiento">Estrategia de Versionamiento</h3>
<p>Los proyectos de adquisición tecnológicas que relacionaremos aquí para el manejo de versión tienen que ver únicamente con el versionamiento de los servicios y API, que son los componentes activos hacia los que apunta la arquitectura de referencia SOA 2.0 diagnosticada por este ejercicio. En este sentido, tenemos: para el manejo de la gestión del cambio se requiere la adquisición de los equipos y licencias de un API Gateway (el que la entidad elija pero compatible con la arquitectura 2.0), junto con los equipos para la ejecución de las Herramientas de documentación y gestión de las versiones de servicios, como Swagger, MadCap Flare, y OpenAPI.</p>
<p><br></p>
<h3 id="monitoreo-y-operación">Monitoreo y Operación</h3>
<p>La adquisición tecnológica que el FNA debe hacer para cumplir con este punto, <em>que está relacionado con DevOps</em>, es la siguiente: herramienta adicional para gestionar el despliegue y operación de los servicios, como GitLAB CI, Azure DevOps (recomendado si el CSP es Microsoft), TeamCity de JetBrains, o Bamboo de Atlassian.</p>
<p>Como segunda adquisición, ahora respecto a la gestión de contenedores, es requerido las licencias (plan) de gestión de Kubernetes, como Kubecost.</p>
<p>En un tercer nivel de adquisición se encuentran las herramientas para monitoreo de la operación, gestión de alarmas y notificaciones y consumo de infraestructura que complemente a las actuales del FNA, y que sean compatibles con la arquitectura de referencia SOA 2.0. Para este efecto, y de manera puntual, estamos recomendando New Relic, por las capacidades de monitoreo del rendimiento de aplicaciones, de la observabilidad, y de la infraestructura.</p>
<p>En caso de adoptar una estrategía de microservicios se sugiere implementar tecnologías de ‘Service Mesh’ que permitan obtener mayor información y control. Se puede elegír implementar soluciones open source (Ej. Istio) y así mismo las versiones personalizadas en servicios administrador ofrecidas por diferentes proveedores en la nube.</p>
<p><br></p>
<h3 id="infraestructura-de-datos-de-autoservicio-1">Infraestructura de datos de autoservicio</h3>
<p>Con el fin de llegar a soportar enfoques de gestión de datos como ‘Malla de Datos’(Data Mesh) se puede revisar la infraestructura interna y proveedores actuales para saber con que elementos(datos, gobierno, procesamiento de información, etc) se cuentan que puedan sirvan para completar la arquitectura requerida.
Mediante servicios administrados en la nube se puede adquirir todos los servicios o aquellos que hagan falta para lograr contar con “Infraestructura de datos de autoservicio”. A continuación algunos proveedores que ofrecen los servicios o plataformas completas: SAP, Microsoft(Azure), Google Cloud, Amazon AWS.</p>
<p><br></p>
<h2 id="detalles-de-implementación-de-infraestrutura">Detalles de Implementación de Infraestrutura</h2>
<p>A manera de detalle de lo que implican los proyectos del plan de comisionamiento o adquisición tecnológica del FNA delineado arriba, presentamos las vista de información de componentes e infraestructura de las soluciones relacionadas en dichos proyectos.</p>
<h3 id="arquitecturas-orientadas-a-eventos">Arquitecturas Orientadas a Eventos</h3>
<p>Sin duda alguna el mecanismo de comunicación más utilizado en
arquitectura orientadas a componentes y servicios es el mecanismo
conocido como request-reply. Es decir, comunicaciones basadas en
transferencia sincrónica de información. Este mecanismo implica en
general, la comunicación entre un servicio consumidor y un servicio
proveedor. El servicio consumidor, debe inicialmente localizar al
servicio consumidor (posiblemente con ayuda de un ESB) y ejecutar una
petición al servicio proveedor. A través de protocolos como SOAP la
comunicación se establece y el intercambio de información comienza
(posiblemente en datos usando formatos en XML).</p>
<p>En el esquema de comunicación basado en mensajes tres son los conceptos de
suma importancia: Eventos, Queries y Comandos.</p>
<p>Los eventos, en una Arquitectura orientada por eventos (EDA) representan
hechos cumplidos, que desean ser notificados de manera asíncrona a los
demás servicios participantes de una solución.</p>
<figure>
<img src="./images/media/image8.png" style="width:3.46667in;height:2.89583in" />
</figure>
<p>Las consultas, representan peticiones a un servicio, que no tienen
efecto de borde.</p>
<figure>
<img src="./images/media/image9.png" style="width:3.73889in;height:3.0625in" />
</figure>
<p><br></p>
<p>Los comandos, representan una intención de cambio en el estado de la
solución. Los comandos son solicitudes que pueden o no ejecutarse, no se
tiene certeza de su cumplimiento. En cualquier caso, el resultado de
ejecución de un comando, puede tener como resultado un evento
notificando a los interesados el resultado obtenido.</p>
<figure>
<img src="./images/media/image10.png" style="width:4.13264in;height:3.01319in" />
</figure>
<p><br></p>
<figure>
<img src="./images/media/image11.png" style="width:2.98681in;height:2.55833in" />
</figure>
<p><br></p>
<p>La figura anterior, muestra el esquema de comunicación fundamental en
las arquitecturas orientadas a eventos. Para ver los detalles completos de este proyecto que por este estudio hemos consignado, ver <a href="N03a%a20Vsta%20aSegenta%20SOA%20FNA.md">…</a>)</p>
<p><br></p>
<h3 id="service-mesh-1">Service Mesh</h3>
<p>En los esquemas de comunicación sincrónica, donde los servicios
localizan otros servicios y envían peticiones sincrónicas (conteniendo
comandos o consultas). Uno de los problemas que pueden surgir, tienen
que ver con la necesidad de satisfacer diferentes requisitos de calidad,
como la seguridad, la disponibilidad y la escalabilidad. Varias de esos
requisitos se resuelven con diferentes componentes, como, por ejemplo,
los balanceadores de carga, herramientas de replicación y de
autorización y autenticación. Adicionalmente, cada servicio implementa
en su lógica, ciertas funcionalidades para manejar este tipo de
requisitos, haciendo la complejidad y el mantenimiento de las
aplicaciones más complejo. Este escenario se ilustra en la siguiente
figura.</p>
<figure>
<img src="./images/media/image12.png" style="width:2.98085in;height:1.32259in" />
</figure>
<p>Tomado de:
https://www.redhat.com/en/topics/microservices/what-is-a-service-mesh</p>
<p><br></p>
<p>En un esquema service mesh, cada servicio es acompañado de un proxy
(llamado sidecar), este proxy se encarga de gestionar toda la seguridad,
disponibilidad y escalabilidad, de forma que los servicios no tengan que
preocuparse por estos elementos. La siguiente figura ilustra esta idea.</p>
<figure>
<img src="./images/media/image13.png" style="width:3.05339in;height:1.29834in" />
</figure>
<p>Tomado de:
https://www.redhat.com/en/topics/microservices/what-is-a-service-mesh</p>
<p><br></p>
<p>La siguiente figura resume lo antes expuesto, donde además se ilustran
los dos elementos fundamentales de este esquema: data plane y control
plane.</p>
<p>El término data plane, se refiere a los proxies (sidecars) asociados a
cada microservicio. El control plane se encarga de gobernar los proxies
asociados a los microservicios.</p>
<figure>
<img src="./images/media/image14.png" style="width:4.04958in;height:1.74876in" />
</figure>
<p>Tomado de:
https://www.techtarget.com/searchitoperations/definition/service-mesh</p>
<p><br></p>
<h3 id="plataforma-de-integración-híbrida-hip">Plataforma de Integración Híbrida (HIP)</h3>
<p>Sin duda alguna tanto las tecnologías basadas en APIs y consumos de
servicios síncronos han sido y seguirán siendo pieza clave en las
arquitecturas de integración y orquestación de servicios. Las
organizaciones han realizado inversiones altas en la instalación y
mantenimiento de infraestructura como ESBs sin contar las múltiples
soluciones que hoy día se manejan basadas en este esquema de
comunicación.</p>
<p>De otra parte, los mecanismos de sincronización y comunicación
asíncronos, basados primordialmente en colas de mensajes, se vienen
posicionando como una alternativa cada vez más seria a los buses de
servicios tradicionales.</p>
<p>Las plataformas de integración híbridas (HIP) se posicionan cada vez más
como una forma de conciliar las estrategias de integración tradicionales
y las nuevas tendencias orientadas a eventos. Estas plataformas
propenden por la transferencia de estado entre sistema de información
utilizando las plataformas de mensajería y la consulta de información de
forma sincrónica sobre copias con ventanas de consistencia (consistencia
eventual)</p>
<figure>
<img src="./images/media/image15.png" style="width:4.33132in;height:3.01989in" />
</figure>
<p><br></p>
<h3 id="hub-de-integración-digital-dih">Hub de Integración Digital (DIH)</h3>
<p>Un DIH es un estilo de arquitectura que busca desacoplar sistemas de
información en un ecosistema de TI. No solo a nivel de flujo de control
sino también a nivel de datos, adicionando una capa de datos de muy baja
latencia. Adicionalmente se propone una mezcla de los tipos de
conectores expuestos anteriormente. En primer lugar, se cuenta con un
API de desacoplamiento. Los DIH permiten trabajar en esquemas híbridos,
con despliegues on-premises y despliegues en cloud.</p>
<figure>
<img src="./images/media/image16.png" style="width:4.07246in;height:3.01388in" />
</figure>
<p>Tomado de: https://www.gigaspaces.com/blog/digital-integration-hub-dih/</p>
<p><br></p>
<p>Esta arquitectura permite la práctica de técnicas DevOps, como la
integración y despliegue continuo. Adicionalmente, esta arquitectura se
enfoca en la recolección de datos desde múltiples fuentes de datos.</p>
<p>En las siguiente figuras podemos apreciar la comparación realizada en el
informe original de Gartner, entre una arquitectura tradicional basada
en APIS en la primera figura y una arquitectura basada en DIH en la
segunda figura.</p>
<figure>
<img src="./images/media/image17.png" style="width:3.86468in;height:2.42409in" />
</figure>
<p>Tomado de:
https://mindovermessaging.com/2022/03/29/maximising-your-apis-with-a-digital-integration-hub/</p>
<figure>
<img src="./images/media/image18.png" style="width:3.89652in;height:2.94861in" />
</figure>
<p>Tomado de:
https://mindovermessaging.com/2022/03/29/maximising-your-apis-with-a-digital-integration-hub/</p>
<p>En el esquema basado en DIH la diferencia fundamental radica en una
nueva capa ubicada entre el API Gateway y los microservicios y la
plataforma híbrida de integración. Esta capa denominada High Performance
Data Store (HPDS). Esta capa se alimenta a partir de la plataforma de
integración, usualmente utilizando un esquema basado en eventos.</p>
<!-- default theme -->

<style>
  /* import google fonts */
  @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
  @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

  /* -------------------------------------------------- */
  /* global */
  /* -------------------------------------------------- */

  /* all elements */
  * {
    /* force sans-serif font unless specified otherwise */
    font-family: "Open Sans", "Helvetica", sans-serif;

    /* prevent text inflation on some mobile browsers */
    -webkit-text-size-adjust: none !important;
    -moz-text-size-adjust: none !important;
    -o-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }

  @media only screen {
    /* "page" element */
    body {
      position: relative;
      box-sizing: border-box;
      font-size: 12pt;
      line-height: 1.5;
      max-width: 8.5in;
      margin: 20px auto;
      padding: 40px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* "page" element */
    body {
      padding: 20px;
      margin: 0;
      border-radius: 0;
      border: none;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
      background: none;
    }
  }

  /* -------------------------------------------------- */
  /* headings */
  /* -------------------------------------------------- */

  /* all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 20px 0;
    padding: 0;
    font-weight: bold;
  }

  /* biggest heading */
  h1 {
    margin: 40px 0;
    text-align: center;
  }

  /* second biggest heading */
  h2 {
    margin-top: 30px;
    padding-bottom: 5px;
    border-bottom: solid 1px #bdbdbd;
  }

  /* heading font sizes */
  h1 {
    font-size: 2em;
  }
  h2 {
    font-size: 1.5em;
  }
  h3 {
    font-size: 1.35em;
  }
  h4 {
    font-size: 1.25em;
  }
  h5 {
    font-size: 1.15em;
  }
  h6 {
    font-size: 1em;
  }

  /* -------------------------------------------------- */
  /* manuscript header */
  /* -------------------------------------------------- */

  /* manuscript title */
  header > h1 {
    margin: 0;
  }

  /* manuscript title caption text (ie "automatically generated on") */
  header + p {
    text-align: center;
    margin-top: 10px;
  }

  /* -------------------------------------------------- */
  /* text elements */
  /* -------------------------------------------------- */

  /* links */
  a {
    color: #2196f3;
    overflow-wrap: break-word;
  }

  /* superscripts and subscripts */
  sub,
  sup {
    /* prevent from affecting line height */
    line-height: 0;
  }

  /* unordered and ordered lists*/
  ul,
  ol {
    padding-left: 20px;
  }

  /* class for styling text semibold */
  .semibold {
    font-weight: 600;
  }

  /* class for styling elements horizontally left aligned */
  .left {
    display: block;
    text-align: left;
    margin-left: auto;
    margin-right: 0;
    justify-content: left;
  }

  /* class for styling elements horizontally centered */
  .center {
    display: block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }

  /* class for styling elements horizontally right aligned */
  .right {
    display: block;
    text-align: right;
    margin-left: 0;
    margin-right: auto;
    justify-content: right;
  }

  /* -------------------------------------------------- */
  /* section elements */
  /* -------------------------------------------------- */

  /* horizontal divider line */
  hr {
    border: none;
    height: 1px;
    background: #bdbdbd;
  }

  /* paragraphs, horizontal dividers, figures, tables, code */
  p,
  hr,
  figure,
  table,
  pre {
    /* treat all as "paragraphs", with consistent vertical margins */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* figures */
  /* -------------------------------------------------- */

  /* figure */
  figure {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure caption */
  figcaption {
    padding: 0;
    padding-top: 10px;
  }

  /* figure image element */
  figure > img,
  figure > svg {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure auto-number */
  img + figcaption > span:first-of-type,
  svg + figcaption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* tables */
  /* -------------------------------------------------- */

  /* table */
  table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* table cells */
  th,
  td {
    border: solid 1px #bdbdbd;
    padding: 10px;
    /* squash table if too wide for page by forcing line breaks */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* header row and even rows */
  th,
  tr:nth-child(2n) {
    background-color: #fafafa;
  }

  /* odd rows */
  tr:nth-child(2n + 1) {
    background-color: #ffffff;
  }

  /* table caption */
  caption {
    text-align: left;
    padding: 0;
    padding-bottom: 10px;
  }

  /* table auto-number */
  table > caption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* code */
  /* -------------------------------------------------- */

  /* multi-line code block */
  pre {
    padding: 10px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
    break-inside: avoid;
    text-align: left;
  }

  /* inline code, ie code within normal text */
  :not(pre) > code {
    padding: 0 4px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
  }

  /* code text */
  /* apply all children, to reach syntax highlighting sub-elements */
  code,
  code * {
    /* force monospace font */
    font-family: "Source Code Pro", "Courier New", monospace;
  }

  /* -------------------------------------------------- */
  /* quotes */
  /* -------------------------------------------------- */

  /* quoted text */
  blockquote {
    margin: 0;
    padding: 0;
    border-left: 4px solid #bdbdbd;
    padding-left: 16px;
    break-inside: avoid;
  }

  /* -------------------------------------------------- */
  /* banners */
  /* -------------------------------------------------- */

  /* info banners */
  .banner {
    box-sizing: border-box;
    display: block;
    position: relative;
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding: 20px;
    text-align: center;
  }

  /* paragraph in banner */
  .banner > p {
    margin: 0;
  }

  /* -------------------------------------------------- */
  /* highlight colors */
  /* -------------------------------------------------- */

  .white {
    background: #ffffff;
  }
  .lightgrey {
    background: #eeeeee;
  }
  .grey {
    background: #757575;
  }
  .darkgrey {
    background: #424242;
  }
  .black {
    background: #000000;
  }
  .lightred {
    background: #ffcdd2;
  }
  .lightyellow {
    background: #ffecb3;
  }
  .lightgreen {
    background: #dcedc8;
  }
  .lightblue {
    background: #e3f2fd;
  }
  .lightpurple {
    background: #f3e5f5;
  }
  .red {
    background: #f44336;
  }
  .orange {
    background: #ff9800;
  }
  .yellow {
    background: #ffeb3b;
  }
  .green {
    background: #4caf50;
  }
  .blue {
    background: #2196f3;
  }
  .purple {
    background: #9c27b0;
  }
  .white,
  .lightgrey,
  .lightred,
  .lightyellow,
  .lightgreen,
  .lightblue,
  .lightpurple,
  .orange,
  .yellow,
  .white a,
  .lightgrey a,
  .lightred a,
  .lightyellow a,
  .lightgreen a,
  .lightblue a,
  .lightpurple a,
  .orange a,
  .yellow a {
    color: #000000;
  }
  .grey,
  .darkgrey,
  .black,
  .red,
  .green,
  .blue,
  .purple,
  .grey a,
  .darkgrey a,
  .black a,
  .red a,
  .green a,
  .blue a,
  .purple a {
    color: #ffffff;
  }

  /* -------------------------------------------------- */
  /* buttons */
  /* -------------------------------------------------- */

  /* class for styling links like buttons */
  .button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 5px;
    padding: 10px 20px;
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    background: none;
    color: #2196f3;
    border: solid 1px #bdbdbd;
    border-radius: 5px;
  }

  /* buttons when hovered */
  .button:hover:not([disabled]),
  .icon_button:hover:not([disabled]) {
    cursor: pointer;
    background: #f5f5f5;
  }

  /* buttons when disabled */
  .button[disabled],
  .icon_button[disabled] {
    opacity: 0.35;
    pointer-events: none;
  }

  /* class for styling buttons containg only single icon */
  .icon_button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 5px;
    border: none;
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* icon button inner svg image */
  .icon_button > svg {
    height: 16px;
  }

  /* -------------------------------------------------- */
  /* icons */
  /* -------------------------------------------------- */

  /* class for styling icons inline with text */
  .inline_icon {
    height: 1em;
    position: relative;
    top: 0.125em;
  }

  /* -------------------------------------------------- */
  /* references */
  /* -------------------------------------------------- */

  .csl-entry {
    margin-top: 15px;
    margin-bottom: 15px;
  }

  /* -------------------------------------------------- */
  /* print control */
  /* -------------------------------------------------- */

  @media print {
    @page {
      /* suggested printing margin */
      margin: 0.5in;
    }

    /* document and "page" elements */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* "page" element */
    body {
      font-size: 11pt !important;
      line-height: 1.35;
    }

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 15px 0;
    }

    /* figures and tables */
    figure,
    table {
      font-size: 0.85em;
    }

    /* table cells */
    th,
    td {
      padding: 5px;
    }

    /* shrink font awesome icons */
    i.fas,
    i.fab,
    i.far,
    i.fal {
      transform: scale(0.85);
    }

    /* decrease banner margins */
    .banner {
      margin-top: 15px;
      margin-bottom: 15px;
      padding: 15px;
    }

    /* class for centering an element vertically on its own page */
    .page_center {
      margin: auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      vertical-align: middle;
      break-before: page;
      break-after: page;
    }

    /* always insert a page break before the element */
    .page_break_before {
      break-before: page;
    }

    /* always insert a page break after the element */
    .page_break_after {
      break-after: page;
    }

    /* avoid page break before the element */
    .page_break_before_avoid {
      break-before: avoid;
    }

    /* avoid page break after the element */
    .page_break_after_avoid {
      break-after: avoid;
    }

    /* avoid page break inside the element */
    .page_break_inside_avoid {
      break-inside: avoid;
    }
  }

  /* -------------------------------------------------- */
  /* override pandoc css quirks */
  /* -------------------------------------------------- */

  .sourceCode {
    /* prevent unsightly overflow in wide code blocks */
    overflow: auto !important;
  }

  div.sourceCode {
    /* prevent background fill on top-most code block  container */
    background: none !important;
  }

  .sourceCode * {
    /* force consistent line spacing */
    line-height: 1.5 !important;
  }

  div.sourceCode {
    /* style code block margins same as <pre> element */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* tablenos */
  /* -------------------------------------------------- */

  /* tablenos wrapper */
  .tablenos {
    width: 100%;
    margin: 20px 0;
  }

  .tablenos > table {
    /* move margins from table to table_wrapper to allow margin collapsing */
    margin: 0;
  }

  @media only screen {
    /* tablenos wrapper */
    .tablenos {
      /* show scrollbar on tables if necessary to prevent overflow */
      overflow-x: auto !important;
    }

    .tablenos th,
    .tablenos td {
      overflow-wrap: unset !important;
      word-break: unset !important;
    }

    /* table in wrapper */
    .tablenos table,
    .tablenos table * {
      /* don't break table words */
      overflow-wrap: normal !important;
    }
  }
</style>
<!-- 
    Plugin Core

    Functions needed for and shared across all first-party plugins.
-->

<script>
  // get element that is target of hash (from link element or url)
  function getHashTarget(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector(`[id="${id}"]`);
    if (!target) return;

    // if figure or table, modify target to get expected element
    if (id.indexOf("fig:") === 0) target = target.querySelector("figure");
    if (id.indexOf("tbl:") === 0) target = target.querySelector("table");

    return target;
  }

  // get position/dimensions of element or viewport
  function getRectInView(element) {
    let rect = {};
    rect.left = 0;
    rect.top = 0;
    rect.right = document.documentElement.clientWidth;
    rect.bottom = document.documentElement.clientHeight;
    let style = {};

    if (element instanceof HTMLElement) {
      rect = element.getBoundingClientRect();
      style = window.getComputedStyle(element);
    }

    const margin = {};
    margin.left = parseFloat(style.marginLeftWidth) || 0;
    margin.top = parseFloat(style.marginTopWidth) || 0;
    margin.right = parseFloat(style.marginRightWidth) || 0;
    margin.bottom = parseFloat(style.marginBottomWidth) || 0;

    const border = {};
    border.left = parseFloat(style.borderLeftWidth) || 0;
    border.top = parseFloat(style.borderTopWidth) || 0;
    border.right = parseFloat(style.borderRightWidth) || 0;
    border.bottom = parseFloat(style.borderBottomWidth) || 0;

    const newRect = {};
    newRect.left = rect.left + margin.left + border.left;
    newRect.top = rect.top + margin.top + border.top;
    newRect.right = rect.right + margin.right + border.right;
    newRect.bottom = rect.bottom + margin.bottom + border.bottom;
    newRect.width = newRect.right - newRect.left;
    newRect.height = newRect.bottom - newRect.top;

    return newRect;
  }

  // get position of element relative to page
  function getRectInPage(element) {
    const rect = getRectInView(element);
    const body = getRectInView(document.body);

    const newRect = {};
    newRect.left = rect.left - body.left;
    newRect.top = rect.top - body.top;
    newRect.right = rect.right - body.left;
    newRect.bottom = rect.bottom - body.top;
    newRect.width = rect.width;
    newRect.height = rect.height;

    return newRect;
  }

  // get closest element before specified element that matches query
  function firstBefore(element, query) {
    while (element && element !== document.body && !element.matches(query))
      element = element.previousElementSibling || element.parentNode;

    return element;
  }

  // check if element is part of collapsed heading
  function isCollapsed(element) {
    while (element && element !== document.body) {
      if (element.dataset.collapsed === "true") return true;
      element = element.parentNode;
    }
    return false;
  }

  // expand any collapsed parent containers of element if necessary
  function expandElement(element) {
    if (isCollapsed(element)) {
      // accordion plugin
      const heading = firstBefore(element, "h2");
      if (heading) heading.click();
      // details/summary HTML element
      const summary = firstBefore(element, "summary");
      if (summary) summary.click();
    }
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);

    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // get list of elements after a start element up to element matching query
  function nextUntil(element, query, exclude) {
    const elements = [];
    while (((element = element.nextElementSibling), element)) {
      if (element.matches(query)) break;
      if (!element.matches(exclude)) elements.push(element);
    }
    return elements;
  }
</script>
<!--
  Accordion Plugin

  Allows sections of content under h2 headings to be collapsible.
-->

<script type="module">
  // whether to always start expanded ('false'), always start collapsed
  // ('true'), or start collapsed when screen small ('auto')
  const startCollapsed = "auto";

  // start script
  function start() {
    // run through each <h2> heading
    const headings = document.querySelectorAll("h2");
    for (const heading of headings) {
      addArrow(heading);

      // start expanded/collapsed based on option
      if (
        startCollapsed === "true" ||
        (startCollapsed === "auto" && isSmallScreen()) ||
        heading.dataset.collapsed === "true"
      )
        collapseHeading(heading);
      else expandElement(heading);
    }

    // attach hash change listener to window
    window.addEventListener("hashchange", onHashChange);
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) goToElement(target);
  }

  // add arrow to heading
  function addArrow(heading) {
    // add arrow button
    const arrow = document.createElement("button");
    arrow.innerHTML = document.querySelector(".icon_angle_down").innerHTML;
    arrow.classList.add("icon_button", "accordion_arrow");
    heading.insertBefore(arrow, heading.firstChild);

    // attach click listener to heading and button
    heading.addEventListener("click", onHeadingClick);
    arrow.addEventListener("click", onArrowClick);
  }

  // determine if on mobile-like device with small screen
  function isSmallScreen() {
    return Math.min(window.innerWidth, window.innerHeight) < 480;
  }

  // when <h2> heading is clicked
  function onHeadingClick(event) {
    // only collapse if <h2> itself is target of click (eg, user did
    // not click on anchor within <h2>)
    if (event.target === this) toggleCollapse(this);
  }

  // when arrow button is clicked
  function onArrowClick() {
    toggleCollapse(this.parentNode);
  }

  // collapse section if expanded, expand if collapsed
  function toggleCollapse(heading) {
    if (heading.dataset.collapsed === "false") collapseHeading(heading);
    else expandElement(heading);
  }

  // elements to exclude from collapse, such as table of contents panel,
  // hypothesis panel, etc
  const exclude = "#toc_panel, div.annotator-frame, #lightbox_overlay";

  // collapse section
  function collapseHeading(heading) {
    heading.setAttribute("data-collapsed", "true");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "true");
  }

  // expand section
  function expandElement(heading) {
    heading.setAttribute("data-collapsed", "false");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "false");
  }

  // get list of elements between this <h2> and next <h2> or <h1>
  // ("children" of the <h2> section)
  function getChildren(heading) {
    return nextUntil(heading, "h2, h1", exclude);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
  <!-- modified from: https://fontawesome.com/icons/angle-down -->
  <svg width="16" height="16" viewBox="0 0 448 512">
    <path
      fill="currentColor"
      d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* accordion arrow button */
    .accordion_arrow {
      margin-right: 10px;
    }

    /* arrow icon when <h2> data-collapsed attribute true */
    h2[data-collapsed="true"] > .accordion_arrow > svg {
      transform: rotate(-90deg);
    }

    /* all elements (except <h2>'s) when data-collapsed attribute true */
    *:not(h2)[data-collapsed="true"] {
      display: none;
    }

    /* accordion arrow button when hovered and <h2>'s when hovered */
    .accordion_arrow:hover,
    h2[data-collapsed="true"]:hover,
    h2[data-collapsed="false"]:hover {
      cursor: pointer;
    }
  }

  /* always hide accordion arrow button on print */
  @media only print {
    .accordion_arrow {
      display: none;
    }
  }
</style>
<!--
  Anchors Plugin

  Adds an anchor next to each of a certain type of element that provides a
  human-readable url to that specific item/position in the document (e.g.
  "manuscript.html#abstract"). It also makes it such that scrolling out of view
  of a target removes its identifier from the url.
-->

<script type="module">
  // which types of elements to add anchors next to, in "document.querySelector"
  // format
  const typesQuery =
    'h1, h2, h3, div[id^="fig:"], div[id^="tbl:"], span[id^="eq:"]';

  // start script
  function start() {
    // add anchor to each element of specified types
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) addAnchor(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // when window is scrolled
  function onScroll() {
    // if url has hash and user has scrolled out of view of hash
    // target, remove hash from url
    const tolerance = 100;
    const target = getHashTarget();
    if (target) {
      if (
        target.getBoundingClientRect().top > window.innerHeight + tolerance ||
        target.getBoundingClientRect().bottom < 0 - tolerance
      )
        history.pushState(null, null, " ");
    }
  }

  // add anchor to element
  function addAnchor(element) {
    let addTo; // element to add anchor button to

    // if figure or table, modify withId and addTo to get expected
    // elements
    if (element.id.indexOf("fig:") === 0) {
      addTo = element.querySelector("figcaption");
    } else if (element.id.indexOf("tbl:") === 0) {
      addTo = element.querySelector("caption");
    } else if (element.id.indexOf("eq:") === 0) {
      addTo = element.querySelector(".eqnos-number");
    }

    addTo = addTo || element;
    const id = element.id || null;

    // do not add anchor if element doesn't have assigned id.
    // id is generated by pandoc and is assumed to be unique and
    // human-readable
    if (!id) return;

    // create anchor button
    const anchor = document.createElement("a");
    anchor.innerHTML = document.querySelector(".icon_link").innerHTML;
    anchor.title = "Link to this part of the document";
    anchor.classList.add("icon_button", "anchor");
    anchor.dataset.ignore = "true";
    anchor.href = "#" + id;
    addTo.appendChild(anchor);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- link icon -->

<template class="icon_link">
  <!-- modified from: https://fontawesome.com/icons/link -->
  <svg width="16" height="16" viewBox="0 0 512 512">
    <path
      fill="currentColor"
      d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* anchor button */
    .anchor {
      opacity: 0;
      margin-left: 5px;
    }

    /* anchor buttons within <h2>'s */
    h2 .anchor {
      margin-left: 10px;
    }

    /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
    *:hover > .anchor,
    .anchor:hover,
    .anchor:focus {
      opacity: 1;
    }

    /* anchor button when hovered */
    .anchor:hover {
      cursor: pointer;
    }
  }

  /* always show anchor button on devices with no mouse/hover ability */
  @media (hover: none) {
    .anchor {
      opacity: 1;
    }
  }

  /* always hide anchor button on print */
  @media only print {
    .anchor {
      display: none;
    }
  }
</style>
<!-- 
    Attributes Plugin

    Allows arbitrary HTML attributes to be attached to (almost) any element.
    Place an HTML comment inside or next to the desired element with the content:
    $attribute="value"
-->

<script type="module">
  // start script
  function start() {
    // get list of comments in document
    const comments = findComments();

    for (const comment of comments)
      if (comment.parentElement)
        addAttributes(comment.parentElement, comment.nodeValue.trim());
  }

  // add html attributes to specified element based on string of
  // html attributes and values
  function addAttributes(element, text) {
    // regex's for finding attribute/value pairs in the format of
    // attribute="value" or attribute='value
    const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
    const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

    // loop through attribute/value pairs
    let match;
    while ((match = text.match(regex2) || text.match(regex1))) {
      // get attribute and value from regex capture groups
      let attribute = match[1];
      let value = match[2];

      // remove from string
      text = text.substring(match.index + match[0].length);

      if (!attribute || !value) break;

      // set attribute of parent element
      try {
        element.setAttribute(attribute, value);
      } catch (error) {
        console.log(error);
      }

      // special case for colspan
      if (attribute === "colspan") removeTableCells(element, value);
    }
  }

  // get list of comment elements in document
  function findComments() {
    const comments = [];

    // iterate over comment nodes in document
    function acceptNode(node) {
      return NodeFilter.FILTER_ACCEPT;
    }
    const iterator = document.createNodeIterator(
      document.body,
      NodeFilter.SHOW_COMMENT,
      acceptNode
    );
    let node;
    while ((node = iterator.nextNode())) comments.push(node);

    return comments;
  }

  // remove certain number of cells after specified cell
  function removeTableCells(cell, number) {
    number = parseInt(number);
    if (!number) return;

    // remove elements
    for (; number > 1; number--) {
      if (cell.nextElementSibling) cell.nextElementSibling.remove();
    }
  }

  // start script on DOMContentLoaded instead of load to ensure this plugins
  // runs before other plugins
  window.addEventListener("DOMContentLoaded", start);
</script>
<!--
  Jump to First Plugin

  Adds a button next to each reference entry, figure, and table that jumps the
  page to the first occurrence of a link to that item in the manuscript.
-->

<script type="module">
  // whether to add buttons next to reference entries
  const references = "true";
  // whether to add buttons next to figures
  const figures = "true";
  // whether to add buttons next to tables
  const tables = "true";

  // start script
  function start() {
    if (references !== "false")
      makeButtons(`div[id^="ref-"]`, ".csl-left-margin", "reference");
    if (figures !== "false")
      makeButtons(`div[id^="fig:"]`, "figcaption", "figure");
    if (tables !== "false") makeButtons(`div[id^="tbl:"]`, "caption", "table");
  }

  // when jump button clicked
  function onButtonClick() {
    const first = getFirstOccurrence(this.dataset.id);
    if (!first) return;

    // update url hash so navigating "back" in history will return user to button
    window.location.hash = this.dataset.id;
    // scroll to link
    const timeout = function () {
      goToElement(first, window.innerHeight * 0.5);
    };
    window.setTimeout(timeout, 0);
  }

  // get first occurrence of link to item in document
  function getFirstOccurrence(id) {
    let query = "a";
    query += '[href="#' + id + '"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelector(query);
  }

  // add button next to each reference entry, figure, or table
  function makeButtons(query, containerQuery, subject) {
    const elements = document.querySelectorAll(query);
    for (const element of elements) {
      const id = element.id;
      const buttonContainer = element.querySelector(containerQuery);
      const first = getFirstOccurrence(id);

      // if can't find link to reference or place to put button, ignore
      if (!first || !buttonContainer) continue;

      // make jump button
      let button = document.createElement("button");
      button.classList.add("icon_button", "jump_arrow");
      button.title = `Jump to the first occurrence of this ${subject} in the document`;
      const icon = document.querySelector(".icon_angle_double_up");
      button.innerHTML = icon.innerHTML;
      button.dataset.id = id;
      button.dataset.ignore = "true";
      button.addEventListener("click", onButtonClick);
      buttonContainer.prepend(button);
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
  <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
  <svg width="16" height="16" viewBox="0 0 320 512">
    <path
      fill="currentColor"
      d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* jump button */
    .jump_arrow {
      position: relative;
      top: 0.125em;
      margin-right: 5px;
    }
  }

  /* always hide jump button on print */
  @media only print {
    .jump_arrow {
      display: none;
    }
  }
</style>
<!-- 
    Lightbox Plugin

    Makes it such that when a user clicks on an image, the image fills the
    screen and the user can pan/drag/zoom the image and navigate between other
    images in the document.
-->

<script type="module">
  // list of possible zoom/scale factors
  const zooms =
    "0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8";
  // whether to fit image to view ('fit'), display at 100% and shrink if
  // necessary ('shrink'), or always display at 100% ('100')
  const defaultZoom = "fit";
  // whether to zoom in/out toward center of view ('true') or mouse ('false')
  const centerZoom = "false";

  // start script
  function start() {
    // run through each <img> element
    const imgs = document.querySelectorAll("figure > img");
    let count = 1;
    for (const img of imgs) {
      img.classList.add("lightbox_document_img");
      img.dataset.number = count;
      img.dataset.total = imgs.length;
      img.addEventListener("click", openLightbox);
      count++;
    }

    // attach mouse and key listeners to window
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("keyup", onKeyUp);
  }

  // when mouse is moved anywhere in window
  function onWindowMouseMove(event) {
    window.mouseX = event.clientX;
    window.mouseY = event.clientY;
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("lightbox_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("lightbox_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeLightbox();
        break;
    }
  }

  // open lightbox
  function openLightbox() {
    const lightbox = makeLightbox(this);
    if (!lightbox) return;

    blurBody(lightbox);
    document.body.appendChild(lightbox);
  }

  // make lightbox
  function makeLightbox(img) {
    // delete lightbox if it exists, start fresh
    closeLightbox();

    // create screen overlay containing lightbox
    const overlay = document.createElement("div");
    overlay.id = "lightbox_overlay";

    // create image info boxes
    const numberInfo = document.createElement("div");
    const zoomInfo = document.createElement("div");
    numberInfo.id = "lightbox_number_info";
    zoomInfo.id = "lightbox_zoom_info";

    // create container for image
    const imageContainer = document.createElement("div");
    imageContainer.id = "lightbox_image_container";
    const lightboxImg = makeLightboxImg(
      img,
      imageContainer,
      numberInfo,
      zoomInfo
    );
    imageContainer.appendChild(lightboxImg);

    // create bottom container for caption and navigation buttons
    const bottomContainer = document.createElement("div");
    bottomContainer.id = "lightbox_bottom_container";
    const caption = makeCaption(img);
    const prevButton = makePrevButton(img);
    const nextButton = makeNextButton(img);
    bottomContainer.appendChild(prevButton);
    bottomContainer.appendChild(caption);
    bottomContainer.appendChild(nextButton);

    // attach top middle and bottom to overlay
    overlay.appendChild(numberInfo);
    overlay.appendChild(zoomInfo);
    overlay.appendChild(imageContainer);
    overlay.appendChild(bottomContainer);

    return overlay;
  }

  // make <img> object that is intuitively draggable and zoomable
  function makeLightboxImg(sourceImg, container, numberInfoBox, zoomInfoBox) {
    // create copy of source <img>
    const img = sourceImg.cloneNode(true);
    img.classList.remove("lightbox_document_img");
    img.removeAttribute("id");
    img.removeAttribute("width");
    img.removeAttribute("height");
    img.style.position = "unset";
    img.style.margin = "0";
    img.style.padding = "0";
    img.style.width = "";
    img.style.height = "";
    img.style.minWidth = "";
    img.style.minHeight = "";
    img.style.maxWidth = "";
    img.style.maxHeight = "";
    img.id = "lightbox_img";

    // build sorted list of zoomSteps
    const zoomSteps = zooms.split(/[^0-9.]/).map((step) => parseFloat(step));
    zoomSteps.sort((a, b) => a - b);

    // <img> object property variables
    let zoom = 1;
    let translateX = 0;
    let translateY = 0;
    let clickMouseX = undefined;
    let clickMouseY = undefined;
    let clickTranslateX = undefined;
    let clickTranslateY = undefined;

    updateNumberInfo();

    // update image numbers displayed in info box
    function updateNumberInfo() {
      numberInfoBox.innerHTML =
        sourceImg.dataset.number + " of " + sourceImg.dataset.total;
    }

    // update zoom displayed in info box
    function updateZoomInfo() {
      let zoomInfo = zoom * 100;
      if (!Number.isInteger(zoomInfo)) zoomInfo = zoomInfo.toFixed(2);
      zoomInfoBox.innerHTML = zoomInfo + "%";
    }

    // move to closest zoom step above current zoom
    const zoomIn = function () {
      for (const zoomStep of zoomSteps) {
        if (zoomStep > zoom) {
          zoom = zoomStep;
          break;
        }
      }
      updateTransform();
    };

    // move to closest zoom step above current zoom
    const zoomOut = function () {
      zoomSteps.reverse();
      for (const zoomStep of zoomSteps) {
        if (zoomStep < zoom) {
          zoom = zoomStep;
          break;
        }
      }
      zoomSteps.reverse();

      updateTransform();
    };

    // update display of <img> based on scale/translate properties
    const updateTransform = function () {
      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      // get new width/height after scale
      const rect = img.getBoundingClientRect();
      // limit translate
      translateX = Math.max(translateX, -rect.width / 2);
      translateX = Math.min(translateX, rect.width / 2);
      translateY = Math.max(translateY, -rect.height / 2);
      translateY = Math.min(translateY, rect.height / 2);

      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      updateZoomInfo();
    };

    // fit <img> to container
    const fit = function () {
      // no x/y offset, 100% zoom by default
      translateX = 0;
      translateY = 0;
      zoom = 1;

      // widths of <img> and container
      const imgWidth = img.naturalWidth;
      const imgHeight = img.naturalHeight;
      const containerWidth = parseFloat(
        window.getComputedStyle(container).width
      );
      const containerHeight = parseFloat(
        window.getComputedStyle(container).height
      );

      // how much zooming is needed to fit <img> to container
      const xRatio = imgWidth / containerWidth;
      const yRatio = imgHeight / containerHeight;
      const maxRatio = Math.max(xRatio, yRatio);
      const newZoom = 1 / maxRatio;

      // fit <img> to container according to option
      if (defaultZoom === "shrink") {
        if (maxRatio > 1) zoom = newZoom;
      } else if (defaultZoom === "fit") zoom = newZoom;

      updateTransform();
    };

    // when mouse wheel is rolled anywhere in container
    const onContainerWheel = function (event) {
      if (!event) return;

      // let ctrl + mouse wheel to zoom behave as normal
      if (event.ctrlKey) return;

      // prevent normal scroll behavior
      event.preventDefault();
      event.stopPropagation();

      // point around which to scale img
      const viewRect = container.getBoundingClientRect();
      const viewX = (viewRect.left + viewRect.right) / 2;
      const viewY = (viewRect.top + viewRect.bottom) / 2;
      const originX = centerZoom === "true" ? viewX : mouseX;
      const originY = centerZoom === "true" ? viewY : mouseY;

      // get point on image under origin
      const oldRect = img.getBoundingClientRect();
      const oldPercentX = (originX - oldRect.left) / oldRect.width;
      const oldPercentY = (originY - oldRect.top) / oldRect.height;

      // increment/decrement zoom
      if (event.deltaY < 0) zoomIn();
      if (event.deltaY > 0) zoomOut();

      // get offset between previous image point and origin
      const newRect = img.getBoundingClientRect();
      const offsetX = originX - (newRect.left + newRect.width * oldPercentX);
      const offsetY = originY - (newRect.top + newRect.height * oldPercentY);

      // translate image to keep image point under origin
      translateX += offsetX;
      translateY += offsetY;

      // perform translate
      updateTransform();
    };

    // when container is clicked
    function onContainerClick(event) {
      // if container itself is target of click, and not other
      // element above it
      if (event.target === this) closeLightbox();
    }

    // when mouse button is pressed on image
    const onImageMouseDown = function (event) {
      // store original mouse position relative to image
      clickMouseX = window.mouseX;
      clickMouseY = window.mouseY;
      clickTranslateX = translateX;
      clickTranslateY = translateY;
      event.stopPropagation();
      event.preventDefault();
    };

    // when mouse button is released anywhere in window
    const onWindowMouseUp = function (event) {
      // reset original mouse position
      clickMouseX = undefined;
      clickMouseY = undefined;
      clickTranslateX = undefined;
      clickTranslateY = undefined;

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mouseup", onWindowMouseUp);
    };

    // when mouse is moved anywhere in window
    const onWindowMouseMove = function (event) {
      if (
        clickMouseX === undefined ||
        clickMouseY === undefined ||
        clickTranslateX === undefined ||
        clickTranslateY === undefined
      )
        return;

      // offset image based on original and current mouse position
      translateX = clickTranslateX + window.mouseX - clickMouseX;
      translateY = clickTranslateY + window.mouseY - clickMouseY;
      updateTransform();
      event.preventDefault();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mousemove", onWindowMouseMove);
    };

    // when window is resized
    const onWindowResize = function (event) {
      fit();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("resize", onWindowResize);
    };

    // attach the necessary event listeners
    img.addEventListener("dblclick", fit);
    img.addEventListener("mousedown", onImageMouseDown);
    container.addEventListener("wheel", onContainerWheel);
    container.addEventListener("mousedown", onContainerClick);
    container.addEventListener("touchstart", onContainerClick);
    window.addEventListener("mouseup", onWindowMouseUp);
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("resize", onWindowResize);

    // run fit() after lightbox atttached to document and <img> Loaded
    // so needed container and img dimensions available
    img.addEventListener("load", fit);

    return img;
  }

  // make caption
  function makeCaption(img) {
    const caption = document.createElement("div");
    caption.id = "lightbox_caption";
    const captionSource = img.nextElementSibling;
    if (captionSource.tagName.toLowerCase() === "figcaption") {
      const captionCopy = makeCopy(captionSource);
      caption.innerHTML = captionCopy.innerHTML;
    }

    caption.addEventListener("touchstart", function (event) {
      event.stopPropagation();
    });

    return caption;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // make button to jump to previous image in document
  function makePrevButton(img) {
    const prevButton = document.createElement("button");
    prevButton.id = "lightbox_prev_button";
    prevButton.title = "Jump to the previous image in the document [←]";
    prevButton.classList.add("icon_button", "lightbox_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;

    // attach click listeners to button
    prevButton.addEventListener("click", function () {
      getPrevImg(img).click();
    });

    return prevButton;
  }

  // make button to jump to next image in document
  function makeNextButton(img) {
    const nextButton = document.createElement("button");
    nextButton.id = "lightbox_next_button";
    nextButton.title = "Jump to the next image in the document [→]";
    nextButton.classList.add("icon_button", "lightbox_button");
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;

    // attach click listeners to button
    nextButton.addEventListener("click", function () {
      getNextImg(img).click();
    });

    return nextButton;
  }

  // get previous image in document
  function getPrevImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if < 1
    if (index - 1 >= 0) index--;
    else index = imgs.length - 1;
    return imgs[index];
  }

  // get next image in document
  function getNextImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if > total
    if (index + 1 <= imgs.length - 1) index++;
    else index = 0;
    return imgs[index];
  }

  // close lightbox
  function closeLightbox() {
    focusBody();

    const lightbox = document.getElementById("lightbox_overlay");
    if (lightbox) lightbox.remove();
  }

  // make all elements behind lightbox non-focusable
  function blurBody(overlay) {
    const all = document.querySelectorAll("*");
    for (const element of all) element.tabIndex = -1;
    document.body.classList.add("body_no_scroll");
  }

  // make all elements focusable again
  function focusBody() {
    const all = document.querySelectorAll("*");
    for (const element of all) element.removeAttribute("tabIndex");
    document.body.classList.remove("body_no_scroll");
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* regular <img> in document when hovered */
    img.lightbox_document_img:hover {
      cursor: pointer;
    }

    .body_no_scroll {
      overflow: hidden !important;
    }

    /* screen overlay */
    #lightbox_overlay {
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 3;
    }

    /* middle area containing lightbox image */
    #lightbox_image_container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      padding: 20px;
    }

    /* bottom area containing caption */
    #lightbox_bottom_container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      min-height: 100px;
      max-height: 100px;
      background: rgba(0, 0, 0, 0.5);
    }

    /* image number info text box */
    #lightbox_number_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      left: 2px;
      top: 0;
      z-index: 4;
    }

    /* zoom info text box */
    #lightbox_zoom_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      right: 2px;
      top: 0;
      z-index: 4;
    }

    /* copy of image caption */
    #lightbox_caption {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      max-height: 100%;
      padding: 10px 0;
      text-align: center;
      overflow-y: auto;
      color: #ffffff;
    }

    /* navigation previous/next button */
    .lightbox_button {
      width: 100px;
      height: 100%;
      min-width: 100px;
      min-height: 100%;
      color: #ffffff;
    }

    /* navigation previous/next button when hovered */
    .lightbox_button:hover {
      background: none !important;
    }

    /* navigation button icon */
    .lightbox_button > svg {
      height: 25px;
    }

    /* figure auto-number */
    #lightbox_caption > span:first-of-type {
      font-weight: bold;
      margin-right: 5px;
    }

    /* lightbox image when hovered */
    #lightbox_img:hover {
      cursor: grab;
    }

    /* lightbox image when grabbed */
    #lightbox_img:active {
      cursor: grabbing;
    }
  }

  /* when on screen < 480px wide */
  @media only screen and (max-width: 480px) {
    /* make navigation buttons skinnier on small screens to make more room for caption text */
    .lightbox_button {
      width: 50px;
      min-width: 50px;
    }
  }

  /* always hide lightbox on print */
  @media only print {
    #lightbox_overlay {
      display: none;
    }
  }
</style>
<!-- 
  Link Highlight Plugin

  Makes it such that when a user hovers or focuses a link, other links that have
  the same target will be highlighted. It also makes it such that when clicking
  a link, the target of the link (eg reference, figure, table) is briefly
  highlighted.
-->

<script type="module">
  // whether to also highlight links that go to external urls
  const externalLinks = "false";
  // whether user must click off to unhighlight instead of just
  // un-hovering
  const clickUnhighlight = "false";
  // whether to also highlight links that are unique
  const highlightUnique = "true";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach mouse and focus listeners to link
      link.addEventListener("mouseenter", onLinkFocus);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("mouseleave", onLinkUnhover);
    }

    // attach click and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("hashchange", onHashChange);

    // run hash change on window load in case user has navigated
    // directly to hash
    onHashChange();
  }

  // when link is focused (tabbed to) or hovered
  function onLinkFocus() {
    highlight(this);
  }

  // when link is unhovered
  function onLinkUnhover() {
    if (clickUnhighlight !== "true") unhighlightAll();
  }

  // when the mouse is clicked anywhere in window
  function onClick(event) {
    unhighlightAll();
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) glowElement(target);
  }

  // start glow sequence on an element
  function glowElement(element) {
    const startGlow = function () {
      onGlowEnd();
      element.dataset.glow = "true";
      element.addEventListener("animationend", onGlowEnd);
    };
    const onGlowEnd = function () {
      element.removeAttribute("data-glow");
      element.removeEventListener("animationend", onGlowEnd);
    };
    startGlow();
  }

  // highlight link and all others with same target
  function highlight(link) {
    // force unhighlight all to start fresh
    unhighlightAll();

    // get links with same target
    if (!link) return;
    const sameLinks = getSameLinks(link);

    // if link unique and option is off, exit and don't highlight
    if (sameLinks.length <= 1 && highlightUnique !== "true") return;

    // highlight all same links, and "select" (special highlight) this
    // one
    for (const sameLink of sameLinks) {
      if (sameLink === link) sameLink.setAttribute("data-selected", "true");
      else sameLink.setAttribute("data-highlighted", "true");
    }
  }

  // unhighlight all links
  function unhighlightAll() {
    const links = getLinks();
    for (const link of links) {
      link.setAttribute("data-selected", "false");
      link.setAttribute("data-highlighted", "false");
    }
  }

  // get links with same target
  function getSameLinks(link) {
    const results = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        results.push(otherLink);
    }
    return results;
  }

  // get all links of types we wish to handle
  function getLinks() {
    let query = "a";
    if (externalLinks !== "true") query += '[href^="#"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelectorAll(query);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  @media only screen {
    /* anything with data-highlighted attribute true */
    [data-highlighted="true"] {
      background: #ffeb3b;
    }

    /* anything with data-selected attribute true */
    [data-selected="true"] {
      background: #ff8a65 !important;
    }

    /* animation definition for glow */
    @keyframes highlight_glow {
      0% {
        background: none;
      }
      10% {
        background: #bbdefb;
      }
      100% {
        background: none;
      }
    }

    /* anything with data-glow attribute true */
    [data-glow="true"] {
      animation: highlight_glow 2s;
    }
  }
</style>
<!--
  Table of Contents Plugin

  Provides a "table of contents" (toc) panel on the side of the document that
  allows the user to conveniently navigate between sections of the document.
-->

<script type="module">
  // which types of elements to add links for, in "document.querySelector" format
  const typesQuery = "h1, h2, h3";
  // whether toc starts open. use 'true' or 'false', or 'auto' to
  // use 'true' behavior when screen wide enough and 'false' when not
  const startOpen = "false";
  // whether toc closes when clicking on toc link. use 'true' or
  // 'false', or 'auto' to use 'false' behavior when screen wide
  // enough and 'true' when not
  const clickClose = "auto";
  // if list item is more than this many characters, text will be
  // truncated
  const charLimit = "50";
  // whether or not to show bullets next to each toc item
  const bullets = "false";

  // start script
  function start() {
    // make toc panel and populate with entries (links to document
    // sections)
    const panel = makePanel();
    if (!panel) return;
    makeEntries(panel);
    // attach panel to document after making entries, so 'toc' heading
    // in panel isn't included in toc
    document.body.insertBefore(panel, document.body.firstChild);

    // initial panel state
    if (startOpen === "true" || (startOpen === "auto" && !isSmallScreen()))
      openPanel();
    else closePanel();

    // attach click, scroll, and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("scroll", onScroll);
    window.addEventListener("hashchange", onScroll);
    window.addEventListener("keyup", onKeyUp);
    onScroll();

    // add class to push document body down out of way of toc button
    document.body.classList.add("toc_body_nudge");
  }

  // determine if screen wide enough to fit toc panel
  function isSmallScreen() {
    // in default theme:
    // 816px = 8.5in = width of "page" (<body>) element
    // 260px = min width of toc panel (*2 for both sides of <body>)
    return window.innerWidth < 816 + 260 * 2;
  }

  // when mouse is clicked anywhere in window
  function onClick() {
    if (isSmallScreen()) closePanel();
  }

  // when window is scrolled or hash changed
  function onScroll() {
    highlightViewed();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    // close on esc
    if (event.key === "Escape") closePanel();
  }

  // find entry of currently viewed document section in toc and highlight
  function highlightViewed() {
    const firstId = getFirstInView(typesQuery);

    // get toc entries (links), unhighlight all, then highlight viewed
    const list = document.getElementById("toc_list");
    if (!firstId || !list) return;
    const links = list.querySelectorAll("a");
    for (const link of links) link.dataset.viewing = "false";
    const link = list.querySelector('a[href="#' + firstId + '"]');
    if (!link) return;
    link.dataset.viewing = "true";
  }

  // get first or previous toc listed element in top half of view
  function getFirstInView(query) {
    // get all elements matching query and with id
    const elements = document.querySelectorAll(query);
    const elementsWithIds = [];
    for (const element of elements) {
      if (element.id) elementsWithIds.push(element);
    }

    // get first or previous element in top half of view
    for (let i = 0; i < elementsWithIds.length; i++) {
      const element = elementsWithIds[i];
      const prevElement = elementsWithIds[Math.max(0, i - 1)];
      if (element.getBoundingClientRect().top >= 0) {
        if (element.getBoundingClientRect().top < window.innerHeight / 2)
          return element.id;
        else return prevElement.id;
      }
    }
  }

  // make panel
  function makePanel() {
    // create panel
    const panel = document.createElement("div");
    panel.id = "toc_panel";
    if (bullets === "true") panel.dataset.bullets = "true";

    // create header
    const header = document.createElement("div");
    header.id = "toc_header";

    // create toc button
    const button = document.createElement("button");
    button.id = "toc_button";
    button.innerHTML = document.querySelector(".icon_th_list").innerHTML;
    button.title = "Table of Contents";
    button.classList.add("icon_button");

    // create header text
    const text = document.createElement("h4");
    text.innerHTML = "Table of Contents";

    // create container for toc list
    const list = document.createElement("div");
    list.id = "toc_list";

    // attach click listeners
    panel.addEventListener("click", onPanelClick);
    header.addEventListener("click", onHeaderClick);
    button.addEventListener("click", onButtonClick);

    // attach elements
    header.appendChild(button);
    header.appendChild(text);
    panel.appendChild(header);
    panel.appendChild(list);

    return panel;
  }

  // create toc entries (links) to each element of the specified types
  function makeEntries(panel) {
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) {
      // do not add link if element doesn't have assigned id
      if (!element.id) continue;

      // create link/list item
      const link = document.createElement("a");
      link.classList.add("toc_link");
      switch (element.tagName.toLowerCase()) {
        case "h1":
          link.dataset.level = "1";
          break;
        case "h2":
          link.dataset.level = "2";
          break;
        case "h3":
          link.dataset.level = "3";
          break;
        case "h4":
          link.dataset.level = "4";
          break;
      }
      link.title = element.innerText;
      let text = element.innerText;
      if (text.length > charLimit) text = text.slice(0, charLimit) + "...";
      link.innerHTML = text;
      link.href = "#" + element.id;
      link.addEventListener("click", onLinkClick);

      // attach link
      panel.querySelector("#toc_list").appendChild(link);
    }
  }

  // when panel is clicked
  function onPanelClick(event) {
    // stop click from propagating to window/document and closing panel
    event.stopPropagation();
  }

  // when header itself is clicked
  function onHeaderClick(event) {
    togglePanel();
  }

  // when button is clicked
  function onButtonClick(event) {
    togglePanel();
    // stop header underneath button from also being clicked
    event.stopPropagation();
  }

  // when link is clicked
  function onLinkClick(event) {
    if (clickClose === "true" || (clickClose === "auto" && isSmallScreen()))
      closePanel();
    else openPanel();
  }

  // open panel if closed, close if opened
  function togglePanel() {
    const panel = document.getElementById("toc_panel");
    if (!panel) return;

    if (panel.dataset.open === "true") closePanel();
    else openPanel();
  }

  // open panel
  function openPanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "true";
  }

  // close panel
  function closePanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "false";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- th list icon -->

<template class="icon_th_list">
  <!-- modified from: https://fontawesome.com/icons/th-list -->
  <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
    <path
      fill="currentColor"
      d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* toc panel */
    #toc_panel {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      background: #ffffff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      z-index: 2;
    }

    /* toc panel when closed */
    #toc_panel[data-open="false"] {
      min-width: 60px;
      width: 60px;
      height: 60px;
      border-right: solid 1px #bdbdbd;
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc panel when open */
    #toc_panel[data-open="true"] {
      min-width: 260px;
      max-width: 480px;
      /* keep panel edge consistent distance away from "page" edge */
      width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
      bottom: 0;
      border-right: solid 1px #bdbdbd;
    }

    /* toc panel header */
    #toc_header {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: center;
      height: 60px;
      margin: 0;
      padding: 20px;
    }

    /* toc panel header when hovered */
    #toc_header:hover {
      cursor: pointer;
    }

    /* toc panel header when panel open */
    #toc_panel[data-open="true"] > #toc_header {
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc open/close header button */
    #toc_button {
      margin-right: 20px;
    }

    /* hide toc list and header text when closed */
    #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
    #toc_panel[data-open="false"] > #toc_list {
      display: none;
    }

    /* toc list of entries */
    #toc_list {
      box-sizing: border-box;
      width: 100%;
      padding: 20px;
      position: absolute;
      top: calc(60px + 1px);
      bottom: 0;
      overflow: auto;
    }

    /* toc entry, link to section in document */
    .toc_link {
      display: block;
      padding: 5px;
      position: relative;
      font-weight: 600;
      text-decoration: none;
    }

    /* toc entry when hovered or when "viewed" */
    .toc_link:hover,
    .toc_link[data-viewing="true"] {
      background: #f5f5f5;
    }

    /* toc entry, level 1 indentation */
    .toc_link[data-level="1"] {
      margin-left: 0;
    }

    /* toc entry, level 2 indentation */
    .toc_link[data-level="2"] {
      margin-left: 20px;
    }

    /* toc entry, level 3 indentation */
    .toc_link[data-level="3"] {
      margin-left: 40px;
    }

    /* toc entry, level 4 indentation */
    .toc_link[data-level="4"] {
      margin-left: 60px;
    }

    /* toc entry bullets */
    #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
      position: absolute;
      left: -15px;
      top: -1px;
      font-size: 1.5em;
    }

    /* toc entry, level 2 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
      content: "\2022";
    }

    /* toc entry, level 3 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
      content: "\25AB";
    }

    /* toc entry, level 4 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
      content: "-";
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* push <body> ("page") element down to make room for toc icon */
    .toc_body_nudge {
      padding-top: 60px;
    }

    /* toc icon when panel closed and not hovered */
    #toc_panel[data-open="false"]:not(:hover) {
      background: rgba(255, 255, 255, 0.75);
    }
  }

  /* always hide toc panel on print */
  @media only print {
    #toc_panel {
      display: none;
    }
  }
</style>
<!-- 
  Tooltips Plugin

  Makes it such that when the user hovers or focuses a link to a citation or
  figure, a tooltip appears with a preview of the reference content, along with
  arrows to navigate between instances of the same reference in the document.
-->

<script type="module">
  // whether user must click off to close tooltip instead of just un-hovering
  const clickClose = "false";
  // delay (in ms) between opening and closing tooltip
  const delay = "100";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach hover and focus listeners to link
      link.addEventListener("mouseover", onLinkHover);
      link.addEventListener("mouseleave", onLinkUnhover);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("touchend", onLinkTouch);
    }

    // attach mouse, key, and resize listeners to window
    window.addEventListener("mousedown", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("keyup", onKeyUp);
    window.addEventListener("resize", onResize);
  }

  // when link is hovered
  function onLinkHover() {
    // function to open tooltip
    const delayOpenTooltip = function () {
      openTooltip(this);
    }.bind(this);

    // run open function after delay
    this.openTooltipTimer = window.setTimeout(delayOpenTooltip, delay);
  }

  // when mouse leaves link
  function onLinkUnhover() {
    // cancel opening tooltip
    window.clearTimeout(this.openTooltipTimer);

    // don't close on unhover if option specifies
    if (clickClose === "true") return;

    // function to close tooltip
    const delayCloseTooltip = function () {
      // if tooltip open and if mouse isn't over tooltip, close
      const tooltip = document.getElementById("tooltip");
      if (tooltip && !tooltip.matches(":hover")) closeTooltip();
    };

    // run close function after delay
    this.closeTooltipTimer = window.setTimeout(delayCloseTooltip, delay);
  }

  // when link is focused (tabbed to)
  function onLinkFocus(event) {
    openTooltip(this);
  }

  // when link is touched on touch screen
  function onLinkTouch(event) {
    // attempt to force hover state on first tap always, and trigger
    // regular link click (and navigation) on second tap
    if (event.target === document.activeElement) event.target.click();
    else {
      document.activeElement.blur();
      event.target.focus();
    }
    if (event.cancelable) event.preventDefault();
    event.stopPropagation();
    return false;
  }

  // when mouse is clicked anywhere in window
  function onClick(event) {
    closeTooltip();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("tooltip_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("tooltip_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeTooltip();
        break;
    }
  }

  // when window is resized or zoomed
  function onResize() {
    closeTooltip();
  }

  // get all links of types we wish to handle
  function getLinks() {
    const queries = [];
    // exclude buttons, anchor links, toc links, etc
    const exclude =
      ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    queries.push('a[href^="#ref-"]' + exclude); // citation links
    queries.push('a[href^="#fig:"]' + exclude); // figure links
    const query = queries.join(", ");
    return document.querySelectorAll(query);
  }

  // get links with same target, get index of link in set, get total
  // same links
  function getSameLinks(link) {
    const sameLinks = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        sameLinks.push(otherLink);
    }

    return {
      elements: sameLinks,
      index: sameLinks.indexOf(link),
      total: sameLinks.length,
    };
  }

  // open tooltip
  function openTooltip(link) {
    // delete tooltip if it exists, start fresh
    closeTooltip();

    // make tooltip element
    const tooltip = makeTooltip(link);

    // if source couldn't be found and tooltip not made, exit
    if (!tooltip) return;

    // make navbar elements
    const navBar = makeNavBar(link);
    if (navBar) tooltip.firstElementChild.appendChild(navBar);

    // attach tooltip to page
    document.body.appendChild(tooltip);

    // position tooltip
    const position = function () {
      positionTooltip(link);
    };
    position();

    // if tooltip contains images, position again after they've loaded
    const imgs = tooltip.querySelectorAll("img");
    for (const img of imgs) img.addEventListener("load", position);
  }

  // close (delete) tooltip
  function closeTooltip() {
    const tooltip = document.getElementById("tooltip");
    if (tooltip) tooltip.remove();
  }

  // make tooltip
  function makeTooltip(link) {
    // get target element that link points to
    const source = getSource(link);

    // if source can't be found, exit
    if (!source) return;

    // create new tooltip
    const tooltip = document.createElement("div");
    tooltip.id = "tooltip";
    const tooltipContent = document.createElement("div");
    tooltipContent.id = "tooltip_content";
    tooltip.appendChild(tooltipContent);

    // make copy of source node and put in tooltip
    const sourceCopy = makeCopy(source);
    tooltipContent.appendChild(sourceCopy);

    // attach mouse event listeners
    tooltip.addEventListener("click", onTooltipClick);
    tooltip.addEventListener("mousedown", onTooltipClick);
    tooltip.addEventListener("touchstart", onTooltipClick);
    tooltip.addEventListener("mouseleave", onTooltipUnhover);

    // (for interaction with lightbox plugin)
    // transfer click on tooltip copied img to original img
    const sourceImg = source.querySelector("img");
    const sourceCopyImg = sourceCopy.querySelector("img");
    if (sourceImg && sourceCopyImg) {
      const clickImg = function () {
        sourceImg.click();
        closeTooltip();
      };
      sourceCopyImg.addEventListener("click", clickImg);
    }

    return tooltip;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
      "class",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // when tooltip is clicked
  function onTooltipClick(event) {
    // when user clicks on tooltip, stop click from transferring
    // outside of tooltip (eg, click off to close tooltip, or eg click
    // off to unhighlight same refs)
    event.stopPropagation();
  }

  // when tooltip is unhovered
  function onTooltipUnhover(event) {
    if (clickClose === "true") return;

    // make sure new mouse/touch/focus no longer over tooltip or any
    // element within it
    const tooltip = document.getElementById("tooltip");
    if (!tooltip) return;
    if (this.contains(event.relatedTarget)) return;

    closeTooltip();
  }

  // make nav bar to go betwen prev/next instances of same reference
  function makeNavBar(link) {
    // find other links to the same source
    const sameLinks = getSameLinks(link);

    // don't show nav bar when singular reference
    if (sameLinks.total <= 1) return;

    // find prev/next links with same target
    const prevLink = getPrevLink(link, sameLinks);
    const nextLink = getNextLink(link, sameLinks);

    // create nav bar
    const navBar = document.createElement("div");
    navBar.id = "tooltip_nav_bar";
    const text = sameLinks.index + 1 + " of " + sameLinks.total;

    // create nav bar prev/next buttons
    const prevButton = document.createElement("button");
    const nextButton = document.createElement("button");
    prevButton.id = "tooltip_prev_button";
    nextButton.id = "tooltip_next_button";
    prevButton.title =
      "Jump to the previous occurence of this item in the document [←]";
    nextButton.title =
      "Jump to the next occurence of this item in the document [→]";
    prevButton.classList.add("icon_button");
    nextButton.classList.add("icon_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;
    nextButton.innerHTML =
      document.querySelector(".icon_caret_right").innerHTML;
    navBar.appendChild(prevButton);
    navBar.appendChild(document.createTextNode(text));
    navBar.appendChild(nextButton);

    // attach click listeners to buttons
    prevButton.addEventListener("click", function () {
      onPrevNextClick(link, prevLink);
    });
    nextButton.addEventListener("click", function () {
      onPrevNextClick(link, nextLink);
    });

    return navBar;
  }

  // get previous link with same target
  function getPrevLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if < 1
    let index;
    if (sameLinks.index - 1 >= 0) index = sameLinks.index - 1;
    else index = sameLinks.total - 1;
    return sameLinks.elements[index];
  }

  // get next link with same target
  function getNextLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if > total
    let index;
    if (sameLinks.index + 1 <= sameLinks.total - 1) index = sameLinks.index + 1;
    else index = 0;
    return sameLinks.elements[index];
  }

  // get element that is target of link or url hash
  function getSource(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector('[id="' + id + '"]');
    if (!target) return;

    // if ref or figure, modify target to get expected element
    if (id.indexOf("ref-") === 0) target = target.querySelector(":nth-child(2)");
    else if (id.indexOf("fig:") === 0) target = target.querySelector("figure");

    return target;
  }

  // when prev/next arrow button is clicked
  function onPrevNextClick(link, prevNextLink) {
    if (link && prevNextLink)
      goToElement(prevNextLink, window.innerHeight * 0.5);
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);
    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // determine position to place tooltip based on link position in
  // viewport and tooltip size
  function positionTooltip(link, left, top) {
    const tooltipElement = document.getElementById("tooltip");
    if (!tooltipElement) return;

    // get convenient vars for position/dimensions of
    // link/tooltip/page/view
    link = getRectInPage(link);
    const tooltip = getRectInPage(tooltipElement);
    const view = getRectInPage();

    // horizontal positioning
    if (left)
      // use explicit value
      left = left;
    else if (link.left + tooltip.width < view.right)
      // fit tooltip to right of link
      left = link.left;
    else if (link.right - tooltip.width > view.left)
      // fit tooltip to left of link
      left = link.right - tooltip.width;
    // center tooltip in view
    else left = (view.right - view.left) / 2 - tooltip.width / 2;

    // vertical positioning
    if (top)
      // use explicit value
      top = top;
    else if (link.top - tooltip.height > view.top)
      // fit tooltip above link
      top = link.top - tooltip.height;
    else if (link.bottom + tooltip.height < view.bottom)
      // fit tooltip below link
      top = link.bottom;
    else {
      // center tooltip in view
      top = view.top + view.height / 2 - tooltip.height / 2;
      // nudge off of link to left/right if possible
      if (link.right + tooltip.width < view.right) left = link.right;
      else if (link.left - tooltip.width > view.left)
        left = link.left - tooltip.width;
    }

    tooltipElement.style.left = left + "px";
    tooltipElement.style.top = top + "px";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* tooltip container */
    #tooltip {
      position: absolute;
      width: 50%;
      min-width: 240px;
      max-width: 75%;
      z-index: 1;
    }

    /* tooltip content */
    #tooltip_content {
      margin-bottom: 5px;
      padding: 20px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
      overflow-wrap: break-word;
    }

    /* tooltip copy of paragraphs and figures */
    #tooltip_content > p,
    #tooltip_content > figure {
      margin: 0;
      max-height: 320px;
      overflow-y: auto;
    }

    /* tooltip copy of <img> */
    #tooltip_content > figure > img,
    #tooltip_content > figure > svg {
      max-height: 260px;
    }

    /* navigation bar */
    #tooltip_nav_bar {
      margin-top: 10px;
      text-align: center;
    }

    /* navigation bar previous/next buton */
    #tooltip_nav_bar > .icon_button {
      position: relative;
      top: 3px;
    }

    /* navigation bar previous button */
    #tooltip_nav_bar > .icon_button:first-of-type {
      margin-right: 5px;
    }

    /* navigation bar next button */
    #tooltip_nav_bar > .icon_button:last-of-type {
      margin-left: 5px;
    }
  }

  /* always hide tooltip on print */
  @media only print {
    #tooltip {
      display: none;
    }
  }
</style>
<!--
  Analytics Plugin (third-party) 
  
  Copy and paste code from Google Analytics or similar service here.
-->
<!-- 
  Annotations Plugin

  Allows public annotation of the  manuscript. See https://web.hypothes.is/.
-->

<script type="module">
  // configuration
  window.hypothesisConfig = function () {
    return {
      branding: {
        accentColor: "#2196f3",
        appBackgroundColor: "#f8f8f8",
        ctaBackgroundColor: "#f8f8f8",
        ctaTextColor: "#000000",
        selectionFontFamily: "Open Sans, Helvetica, sans serif",
        annotationFontFamily: "Open Sans, Helvetica, sans serif",
      },
    };
  };

  // hypothesis client script
  const embed = "https://hypothes.is/embed.js";
  // hypothesis annotation count query url
  const query = "https://api.hypothes.is/api/search?limit=0&url=";

  // start script
  function start() {
    const button = makeButton();
    document.body.insertBefore(button, document.body.firstChild);
    insertCount(button);
  }

  // make button
  function makeButton() {
    // create button
    const button = document.createElement("button");
    button.id = "hypothesis_button";
    button.innerHTML = document.querySelector(".icon_hypothesis").innerHTML;
    button.title = "Hypothesis annotations";
    button.classList.add("icon_button");

    function onClick(event) {
      onButtonClick(event, button);
    }

    // attach click listeners
    button.addEventListener("click", onClick);

    return button;
  }

  // insert annotations count
  async function insertCount(button) {
    // get annotation count from Hypothesis based on url
    let count = "-";
    try {
      const canonical = document.querySelector('link[rel="canonical"]');
      const location = window.location;
      const url = encodeURIComponent((canonical || location).href);
      const response = await fetch(query + url);
      const json = await response.json();
      count = json.total || "-";
    } catch (error) {
      console.log(error);
    }

    // put count into button
    const counter = document.createElement("span");
    counter.id = "hypothesis_count";
    counter.innerHTML = count;
    button.title = "View " + count + " Hypothesis annotations";
    button.append(counter);
  }

  // when button is clicked
  function onButtonClick(event, button) {
    const script = document.createElement("script");
    script.src = embed;
    document.body.append(script);
    button.remove();
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
  <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
  <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
    <path
      fill="currentColor"
      d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  /* hypothesis activation button */
  #hypothesis_button {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: #ffffff;
    border-radius: 0;
    border-left: solid 1px #bdbdbd;
    border-bottom: solid 1px #bdbdbd;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    z-index: 2;
  }

  /* hypothesis button svg */
  #hypothesis_button > svg {
    position: relative;
    top: -4px;
  }

  /* hypothesis annotation count */
  #hypothesis_count {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 5px;
  }

  /* side panel */
  .annotator-frame {
    width: 280px !important;
  }

  /* match highlight color to rest of theme */
  .annotator-highlights-always-on .annotator-hl {
    background-color: #ffeb3b !important;
  }

  /* match focused color to rest of theme */
  .annotator-hl.annotator-hl-focused {
    background-color: #ff8a65 !important;
  }

  /* match bucket bar color to rest of theme */
  .annotator-bucket-bar {
    background: #f5f5f5 !important;
  }

  /* always hide button, toolbar, and tooltip on print */
  @media only print {
    #hypothesis_button {
      display: none;
    }

    .annotator-frame {
      display: none !important;
    }

    hypothesis-adder {
      display: none !important;
    }
  }
</style>
<!-- 
  Mathjax Plugin (third-party) 

  Allows the proper rendering of math/equations written in LaTeX.
  See https://www.mathjax.org/.
-->

<script type="text/x-mathjax-config">
  // configuration
  MathJax.Hub.Config({
    "CommonHTML": { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
    "SVG": { linebreaks: { automatic: true } },
    "fast-preview": { disabled: true }
  });
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
  integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A=="
  crossorigin="anonymous"
></script>

<style>
  /* mathjax containers */
  .math.display > span:not(.MathJax_Preview) {
    /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
    display: flex !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }

  /* right click menu */
  .MathJax_Menu {
    border-radius: 5px !important;
    border: solid 1px #bdbdbd !important;
    box-shadow: none !important;
  }

  /* equation auto-number */
  span[id^="eq:"] > span.math.display + span {
    font-weight: 600;
  }

  /* equation */
  span[id^="eq:"] > span.math.display > span {
    /* nudge to make room for equation auto-number and anchor */
    margin-right: 60px !important;
  }
</style>
</body>
</html>
